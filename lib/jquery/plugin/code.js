//-------------------------------------------------------
//plugin
//-------------------------------------------------------
//bookblock
//-------------------------------------------------------
//  bookblock_min               js              bookblock套件
//  jquery_bookblock_min        jquery          bookblock套件
//  jquerypp_custom             bookblock       相關套件
//  modernizr_custom            bookblock       相關套件
//
//-------------------------------------------------------
//block_ui
//-------------------------------------------------------
//  block_ui                    jquery          全頁遮罩
//
//-------------------------------------------------------
//tablesorter
//-------------------------------------------------------
//
//
//-------------------------------------------------------
//bubble_popup
//-------------------------------------------------------
//jquery-bubble-popup-v3        css             css相關套件
//jquerybubblepopup-themes      obj             css相關物件套件
//bubble_popup                  jquery          氣泡訊息
//
//-------------------------------------------------------
//chosen
//-------------------------------------------------------
//code                          css             css相關套件           
//code                          jquery          jquery智慧選單 
//
//-------------------------------------------------------
//flot          
//-------------------------------------------------------
//jquery.flot                   jquery          jquery圖表核心套件
//jquery.flot.xxx               jquery          jquery各圖表套件
//excanvas                      jquery          jquery圖表套件ie修正
//

//-------------------------------------------------------
//chosen
//-------------------------------------------------------

    /*!
    Chosen, a Select Box Enhancer for jQuery and Prototype
    by Patrick Filler for Harvest, http://getharvest.com

    Version 1.4.2
    Full source at https://github.com/harvesthq/chosen
    Copyright (c) 2011-2015 Harvest http://getharvest.com

    MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
    This file is generated by `grunt build`, do not edit it by hand.
    */

    (function() {
      var $, AbstractChosen, Chosen, SelectParser, _ref,
        __hasProp = {}.hasOwnProperty,
        __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

      SelectParser = (function() {
        function SelectParser() {
          this.options_index = 0;
          this.parsed = [];
        }

        SelectParser.prototype.add_node = function(child) {
          if (child.nodeName.toUpperCase() === "OPTGROUP") {
            return this.add_group(child);
          } else {
            return this.add_option(child);
          }
        };

        SelectParser.prototype.add_group = function(group) {
          var group_position, option, _i, _len, _ref, _results;
          group_position = this.parsed.length;
          this.parsed.push({
            array_index: group_position,
            group: true,
            label: this.escapeExpression(group.label),
            title: group.title ? group.title : void 0,
            children: 0,
            disabled: group.disabled,
            classes: group.className
          });
          _ref = group.childNodes;
          _results = [];
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            option = _ref[_i];
            _results.push(this.add_option(option, group_position, group.disabled));
          }
          return _results;
        };

        SelectParser.prototype.add_option = function(option, group_position, group_disabled) {
          if (option.nodeName.toUpperCase() === "OPTION") {
            if (option.text !== "") {
              if (group_position != null) {
                this.parsed[group_position].children += 1;
              }
              this.parsed.push({
                array_index: this.parsed.length,
                options_index: this.options_index,
                value: option.value,
                text: option.text,
                html: option.innerHTML,
                title: option.title ? option.title : void 0,
                selected: option.selected,
                disabled: group_disabled === true ? group_disabled : option.disabled,
                group_array_index: group_position,
                group_label: group_position != null ? this.parsed[group_position].label : null,
                classes: option.className,
                style: option.style.cssText
              });
            } else {
              this.parsed.push({
                array_index: this.parsed.length,
                options_index: this.options_index,
                empty: true
              });
            }
            return this.options_index += 1;
          }
        };

        SelectParser.prototype.escapeExpression = function(text) {
          var map, unsafe_chars;
          if ((text == null) || text === false) {
            return "";
          }
          if (!/[\&\<\>\"\'\`]/.test(text)) {
            return text;
          }
          map = {
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;",
            "`": "&#x60;"
          };
          unsafe_chars = /&(?!\w+;)|[\<\>\"\'\`]/g;
          return text.replace(unsafe_chars, function(chr) {
            return map[chr] || "&amp;";
          });
        };

        return SelectParser;

      })();

      SelectParser.select_to_array = function(select) {
        var child, parser, _i, _len, _ref;
        parser = new SelectParser();
        _ref = select.childNodes;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          child = _ref[_i];
          parser.add_node(child);
        }
        return parser.parsed;
      };

      AbstractChosen = (function() {
        function AbstractChosen(form_field, options) {
          this.form_field = form_field;
          this.options = options != null ? options : {};
          if (!AbstractChosen.browser_is_supported()) {
            return;
          }
          this.is_multiple = this.form_field.multiple;
          this.set_default_text();
          this.set_default_values();
          this.setup();
          this.set_up_html();
          this.register_observers();
          this.on_ready();
        }

        AbstractChosen.prototype.set_default_values = function() {
          var _this = this;
          this.click_test_action = function(evt) {
            return _this.test_active_click(evt);
          };
          this.activate_action = function(evt) {
            return _this.activate_field(evt);
          };
          this.active_field = false;
          this.mouse_on_container = false;
          this.results_showing = false;
          this.result_highlighted = null;
          this.allow_single_deselect = (this.options.allow_single_deselect != null) && (this.form_field.options[0] != null) && this.form_field.options[0].text === "" ? this.options.allow_single_deselect : false;
          this.disable_search_threshold = this.options.disable_search_threshold || 0;
          this.disable_search = this.options.disable_search || false;
          this.enable_split_word_search = this.options.enable_split_word_search != null ? this.options.enable_split_word_search : true;
          this.group_search = this.options.group_search != null ? this.options.group_search : true;
          this.search_contains = this.options.search_contains || false;
          this.single_backstroke_delete = this.options.single_backstroke_delete != null ? this.options.single_backstroke_delete : true;
          this.max_selected_options = this.options.max_selected_options || Infinity;
          this.inherit_select_classes = this.options.inherit_select_classes || false;
          this.display_selected_options = this.options.display_selected_options != null ? this.options.display_selected_options : true;
          this.display_disabled_options = this.options.display_disabled_options != null ? this.options.display_disabled_options : true;
          return this.include_group_label_in_selected = this.options.include_group_label_in_selected || false;
        };

        AbstractChosen.prototype.set_default_text = function() {
          if (this.form_field.getAttribute("data-placeholder")) {
            this.default_text = this.form_field.getAttribute("data-placeholder");
          } else if (this.is_multiple) {
            this.default_text = this.options.placeholder_text_multiple || this.options.placeholder_text || AbstractChosen.default_multiple_text;
          } else {
            this.default_text = this.options.placeholder_text_single || this.options.placeholder_text || AbstractChosen.default_single_text;
          }
          return this.results_none_found = this.form_field.getAttribute("data-no_results_text") || this.options.no_results_text || AbstractChosen.default_no_result_text;
        };

        AbstractChosen.prototype.choice_label = function(item) {
          if (this.include_group_label_in_selected && (item.group_label != null)) {
            return "<b class='group-name'>" + item.group_label + "</b>" + item.html;
          } else {
            return item.html;
          }
        };

        AbstractChosen.prototype.mouse_enter = function() {
          return this.mouse_on_container = true;
        };

        AbstractChosen.prototype.mouse_leave = function() {
          return this.mouse_on_container = false;
        };

        AbstractChosen.prototype.input_focus = function(evt) {
          var _this = this;
          if (this.is_multiple) {
            if (!this.active_field) {
              return setTimeout((function() {
                return _this.container_mousedown();
              }), 50);
            }
          } else {
            if (!this.active_field) {
              return this.activate_field();
            }
          }
        };

        AbstractChosen.prototype.input_blur = function(evt) {
          var _this = this;
          if (!this.mouse_on_container) {
            this.active_field = false;
            return setTimeout((function() {
              return _this.blur_test();
            }), 100);
          }
        };

        AbstractChosen.prototype.results_option_build = function(options) {
          var content, data, _i, _len, _ref;
          content = '';
          _ref = this.results_data;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            data = _ref[_i];
            if (data.group) {
              content += this.result_add_group(data);
            } else {
              content += this.result_add_option(data);
            }
            if (options != null ? options.first : void 0) {
              if (data.selected && this.is_multiple) {
                this.choice_build(data);
              } else if (data.selected && !this.is_multiple) {
                this.single_set_selected_text(this.choice_label(data));
              }
            }
          }
          return content;
        };

        AbstractChosen.prototype.result_add_option = function(option) {
          var classes, option_el;
          if (!option.search_match) {
            return '';
          }
          if (!this.include_option_in_results(option)) {
            return '';
          }
          classes = [];
          if (!option.disabled && !(option.selected && this.is_multiple)) {
            classes.push("active-result");
          }
          if (option.disabled && !(option.selected && this.is_multiple)) {
            classes.push("disabled-result");
          }
          if (option.selected) {
            classes.push("result-selected");
          }
          if (option.group_array_index != null) {
            classes.push("group-option");
          }
          if (option.classes !== "") {
            classes.push(option.classes);
          }
          option_el = document.createElement("li");
          option_el.className = classes.join(" ");
          option_el.style.cssText = option.style;
          option_el.setAttribute("data-option-array-index", option.array_index);
          option_el.innerHTML = option.search_text;
          if (option.title) {
            option_el.title = option.title;
          }
          return this.outerHTML(option_el);
        };

        AbstractChosen.prototype.result_add_group = function(group) {
          var classes, group_el;
          if (!(group.search_match || group.group_match)) {
            return '';
          }
          if (!(group.active_options > 0)) {
            return '';
          }
          classes = [];
          classes.push("group-result");
          if (group.classes) {
            classes.push(group.classes);
          }
          group_el = document.createElement("li");
          group_el.className = classes.join(" ");
          group_el.innerHTML = group.search_text;
          if (group.title) {
            group_el.title = group.title;
          }
          return this.outerHTML(group_el);
        };

        AbstractChosen.prototype.results_update_field = function() {
          this.set_default_text();
          if (!this.is_multiple) {
            this.results_reset_cleanup();
          }
          this.result_clear_highlight();
          this.results_build();
          if (this.results_showing) {
            return this.winnow_results();
          }
        };

        AbstractChosen.prototype.reset_single_select_options = function() {
          var result, _i, _len, _ref, _results;
          _ref = this.results_data;
          _results = [];
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            result = _ref[_i];
            if (result.selected) {
              _results.push(result.selected = false);
            } else {
              _results.push(void 0);
            }
          }
          return _results;
        };

        AbstractChosen.prototype.results_toggle = function() {
          if (this.results_showing) {
            return this.results_hide();
          } else {
            return this.results_show();
          }
        };

        AbstractChosen.prototype.results_search = function(evt) {
          if (this.results_showing) {
            return this.winnow_results();
          } else {
            return this.results_show();
          }
        };

        AbstractChosen.prototype.winnow_results = function() {
          var escapedSearchText, option, regex, results, results_group, searchText, startpos, text, zregex, _i, _len, _ref;
          this.no_results_clear();
          results = 0;
          searchText = this.get_search_text();
          escapedSearchText = searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
          zregex = new RegExp(escapedSearchText, 'i');
          regex = this.get_search_regex(escapedSearchText);
          _ref = this.results_data;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            option = _ref[_i];
            option.search_match = false;
            results_group = null;
            if (this.include_option_in_results(option)) {
              if (option.group) {
                option.group_match = false;
                option.active_options = 0;
              }
              if ((option.group_array_index != null) && this.results_data[option.group_array_index]) {
                results_group = this.results_data[option.group_array_index];
                if (results_group.active_options === 0 && results_group.search_match) {
                  results += 1;
                }
                results_group.active_options += 1;
              }
              option.search_text = option.group ? option.label : option.html;
              if (!(option.group && !this.group_search)) {
                option.search_match = this.search_string_match(option.search_text, regex);
                if (option.search_match && !option.group) {
                  results += 1;
                }
                if (option.search_match) {
                  if (searchText.length) {
                    startpos = option.search_text.search(zregex);
                    text = option.search_text.substr(0, startpos + searchText.length) + '</em>' + option.search_text.substr(startpos + searchText.length);
                    option.search_text = text.substr(0, startpos) + '<em>' + text.substr(startpos);
                  }
                  if (results_group != null) {
                    results_group.group_match = true;
                  }
                } else if ((option.group_array_index != null) && this.results_data[option.group_array_index].search_match) {
                  option.search_match = true;
                }
              }
            }
          }
          this.result_clear_highlight();
          if (results < 1 && searchText.length) {
            this.update_results_content("");
            return this.no_results(searchText);
          } else {
            this.update_results_content(this.results_option_build());
            return this.winnow_results_set_highlight();
          }
        };

        AbstractChosen.prototype.get_search_regex = function(escaped_search_string) {
          var regex_anchor;
          regex_anchor = this.search_contains ? "" : "^";
          return new RegExp(regex_anchor + escaped_search_string, 'i');
        };

        AbstractChosen.prototype.search_string_match = function(search_string, regex) {
          var part, parts, _i, _len;
          if (regex.test(search_string)) {
            return true;
          } else if (this.enable_split_word_search && (search_string.indexOf(" ") >= 0 || search_string.indexOf("[") === 0)) {
            parts = search_string.replace(/\[|\]/g, "").split(" ");
            if (parts.length) {
              for (_i = 0, _len = parts.length; _i < _len; _i++) {
                part = parts[_i];
                if (regex.test(part)) {
                  return true;
                }
              }
            }
          }
        };

        AbstractChosen.prototype.choices_count = function() {
          var option, _i, _len, _ref;
          if (this.selected_option_count != null) {
            return this.selected_option_count;
          }
          this.selected_option_count = 0;
          _ref = this.form_field.options;
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            option = _ref[_i];
            if (option.selected) {
              this.selected_option_count += 1;
            }
          }
          return this.selected_option_count;
        };

        AbstractChosen.prototype.choices_click = function(evt) {
          evt.preventDefault();
          if (!(this.results_showing || this.is_disabled)) {
            return this.results_show();
          }
        };

        AbstractChosen.prototype.keyup_checker = function(evt) {
          var stroke, _ref;
          stroke = (_ref = evt.which) != null ? _ref : evt.keyCode;
          this.search_field_scale();
          switch (stroke) {
            case 8:
              if (this.is_multiple && this.backstroke_length < 1 && this.choices_count() > 0) {
                return this.keydown_backstroke();
              } else if (!this.pending_backstroke) {
                this.result_clear_highlight();
                return this.results_search();
              }
              break;
            case 13:
              evt.preventDefault();
              if (this.results_showing) {
                return this.result_select(evt);
              }
              break;
            case 27:
              if (this.results_showing) {
                this.results_hide();
              }
              return true;
            case 9:
            case 38:
            case 40:
            case 16:
            case 91:
            case 17:
              break;
            default:
              return this.results_search();
          }
        };

        AbstractChosen.prototype.clipboard_event_checker = function(evt) {
          var _this = this;
          return setTimeout((function() {
            return _this.results_search();
          }), 50);
        };

        AbstractChosen.prototype.container_width = function() {
          if (this.options.width != null) {
            return this.options.width;
          } else {
            return "" + this.form_field.offsetWidth + "px";
          }
        };

        AbstractChosen.prototype.include_option_in_results = function(option) {
          if (this.is_multiple && (!this.display_selected_options && option.selected)) {
            return false;
          }
          if (!this.display_disabled_options && option.disabled) {
            return false;
          }
          if (option.empty) {
            return false;
          }
          return true;
        };

        AbstractChosen.prototype.search_results_touchstart = function(evt) {
          this.touch_started = true;
          return this.search_results_mouseover(evt);
        };

        AbstractChosen.prototype.search_results_touchmove = function(evt) {
          this.touch_started = false;
          return this.search_results_mouseout(evt);
        };

        AbstractChosen.prototype.search_results_touchend = function(evt) {
          if (this.touch_started) {
            return this.search_results_mouseup(evt);
          }
        };

        AbstractChosen.prototype.outerHTML = function(element) {
          var tmp;
          if (element.outerHTML) {
            return element.outerHTML;
          }
          tmp = document.createElement("div");
          tmp.appendChild(element);
          return tmp.innerHTML;
        };

        AbstractChosen.browser_is_supported = function() {
          if (window.navigator.appName === "Microsoft Internet Explorer") {
            return document.documentMode >= 8;
          }
          if (/iP(od|hone)/i.test(window.navigator.userAgent)) {
            return false;
          }
          if (/Android/i.test(window.navigator.userAgent)) {
            if (/Mobile/i.test(window.navigator.userAgent)) {
              return false;
            }
          }
          return true;
        };

        AbstractChosen.default_multiple_text = "Select Some Options";

        AbstractChosen.default_single_text = "Select an Option";

        AbstractChosen.default_no_result_text = "No results match";

        return AbstractChosen;

      })();

      $ = jQuery;

      $.fn.extend({
        chosen: function(options) {
          if (!AbstractChosen.browser_is_supported()) {
            return this;
          }
          return this.each(function(input_field) {
            var $this, chosen;
            $this = $(this);
            chosen = $this.data('chosen');
            if (options === 'destroy' && chosen instanceof Chosen) {
              chosen.destroy();
            } else if (!(chosen instanceof Chosen)) {
              $this.data('chosen', new Chosen(this, options));
            }
          });
        }
      });

      Chosen = (function(_super) {
        __extends(Chosen, _super);

        function Chosen() {
          _ref = Chosen.__super__.constructor.apply(this, arguments);
          return _ref;
        }

        Chosen.prototype.setup = function() {
          this.form_field_jq = $(this.form_field);
          this.current_selectedIndex = this.form_field.selectedIndex;
          return this.is_rtl = this.form_field_jq.hasClass("chosen-rtl");
        };

        Chosen.prototype.set_up_html = function() {
          var container_classes, container_props;
          container_classes = ["chosen-container"];
          container_classes.push("chosen-container-" + (this.is_multiple ? "multi" : "single"));
          if (this.inherit_select_classes && this.form_field.className) {
            container_classes.push(this.form_field.className);
          }
          if (this.is_rtl) {
            container_classes.push("chosen-rtl");
          }
          container_props = {
            'class': container_classes.join(' '),
            'style': "width: " + (this.container_width()) + ";",
            'title': this.form_field.title
          };
          if (this.form_field.id.length) {
            container_props.id = this.form_field.id.replace(/[^\w]/g, '_') + "_chosen";
          }
          this.container = $("<div />", container_props);
          if (this.is_multiple) {
            this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="' + this.default_text + '" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>');
          } else {
            this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>' + this.default_text + '</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>');
          }
          this.form_field_jq.hide().after(this.container);
          this.dropdown = this.container.find('div.chosen-drop').first();
          this.search_field = this.container.find('input').first();
          this.search_results = this.container.find('ul.chosen-results').first();
          this.search_field_scale();
          this.search_no_results = this.container.find('li.no-results').first();
          if (this.is_multiple) {
            this.search_choices = this.container.find('ul.chosen-choices').first();
            this.search_container = this.container.find('li.search-field').first();
          } else {
            this.search_container = this.container.find('div.chosen-search').first();
            this.selected_item = this.container.find('.chosen-single').first();
          }
          this.results_build();
          this.set_tab_index();
          return this.set_label_behavior();
        };

        Chosen.prototype.on_ready = function() {
          return this.form_field_jq.trigger("chosen:ready", {
            chosen: this
          });
        };

        Chosen.prototype.register_observers = function() {
          var _this = this;
          this.container.bind('touchstart.chosen', function(evt) {
            _this.container_mousedown(evt);
            return evt.preventDefault();
          });
          this.container.bind('touchend.chosen', function(evt) {
            _this.container_mouseup(evt);
            return evt.preventDefault();
          });
          this.container.bind('mousedown.chosen', function(evt) {
            _this.container_mousedown(evt);
          });
          this.container.bind('mouseup.chosen', function(evt) {
            _this.container_mouseup(evt);
          });
          this.container.bind('mouseenter.chosen', function(evt) {
            _this.mouse_enter(evt);
          });
          this.container.bind('mouseleave.chosen', function(evt) {
            _this.mouse_leave(evt);
          });
          this.search_results.bind('mouseup.chosen', function(evt) {
            _this.search_results_mouseup(evt);
          });
          this.search_results.bind('mouseover.chosen', function(evt) {
            _this.search_results_mouseover(evt);
          });
          this.search_results.bind('mouseout.chosen', function(evt) {
            _this.search_results_mouseout(evt);
          });
          this.search_results.bind('mousewheel.chosen DOMMouseScroll.chosen', function(evt) {
            _this.search_results_mousewheel(evt);
          });
          this.search_results.bind('touchstart.chosen', function(evt) {
            _this.search_results_touchstart(evt);
          });
          this.search_results.bind('touchmove.chosen', function(evt) {
            _this.search_results_touchmove(evt);
          });
          this.search_results.bind('touchend.chosen', function(evt) {
            _this.search_results_touchend(evt);
          });
          this.form_field_jq.bind("chosen:updated.chosen", function(evt) {
            _this.results_update_field(evt);
          });
          this.form_field_jq.bind("chosen:activate.chosen", function(evt) {
            _this.activate_field(evt);
          });
          this.form_field_jq.bind("chosen:open.chosen", function(evt) {
            _this.container_mousedown(evt);
          });
          this.form_field_jq.bind("chosen:close.chosen", function(evt) {
            _this.input_blur(evt);
          });
          this.search_field.bind('blur.chosen', function(evt) {
            _this.input_blur(evt);
          });
          this.search_field.bind('keyup.chosen', function(evt) {
            _this.keyup_checker(evt);
          });
          this.search_field.bind('keydown.chosen', function(evt) {
            _this.keydown_checker(evt);
          });
          this.search_field.bind('focus.chosen', function(evt) {
            _this.input_focus(evt);
          });
          this.search_field.bind('cut.chosen', function(evt) {
            _this.clipboard_event_checker(evt);
          });
          this.search_field.bind('paste.chosen', function(evt) {
            _this.clipboard_event_checker(evt);
          });
          if (this.is_multiple) {
            return this.search_choices.bind('click.chosen', function(evt) {
              _this.choices_click(evt);
            });
          } else {
            return this.container.bind('click.chosen', function(evt) {
              evt.preventDefault();
            });
          }
        };

        Chosen.prototype.destroy = function() {
          $(this.container[0].ownerDocument).unbind("click.chosen", this.click_test_action);
          if (this.search_field[0].tabIndex) {
            this.form_field_jq[0].tabIndex = this.search_field[0].tabIndex;
          }
          this.container.remove();
          this.form_field_jq.removeData('chosen');
          return this.form_field_jq.show();
        };

        Chosen.prototype.search_field_disabled = function() {
          this.is_disabled = this.form_field_jq[0].disabled;
          if (this.is_disabled) {
            this.container.addClass('chosen-disabled');
            this.search_field[0].disabled = true;
            if (!this.is_multiple) {
              this.selected_item.unbind("focus.chosen", this.activate_action);
            }
            return this.close_field();
          } else {
            this.container.removeClass('chosen-disabled');
            this.search_field[0].disabled = false;
            if (!this.is_multiple) {
              return this.selected_item.bind("focus.chosen", this.activate_action);
            }
          }
        };

        Chosen.prototype.container_mousedown = function(evt) {
          if (!this.is_disabled) {
            if (evt && evt.type === "mousedown" && !this.results_showing) {
              evt.preventDefault();
            }
            if (!((evt != null) && ($(evt.target)).hasClass("search-choice-close"))) {
              if (!this.active_field) {
                if (this.is_multiple) {
                  this.search_field.val("");
                }
                $(this.container[0].ownerDocument).bind('click.chosen', this.click_test_action);
                this.results_show();
              } else if (!this.is_multiple && evt && (($(evt.target)[0] === this.selected_item[0]) || $(evt.target).parents("a.chosen-single").length)) {
                evt.preventDefault();
                this.results_toggle();
              }
              return this.activate_field();
            }
          }
        };

        Chosen.prototype.container_mouseup = function(evt) {
          if (evt.target.nodeName === "ABBR" && !this.is_disabled) {
            return this.results_reset(evt);
          }
        };

        Chosen.prototype.search_results_mousewheel = function(evt) {
          var delta;
          if (evt.originalEvent) {
            delta = evt.originalEvent.deltaY || -evt.originalEvent.wheelDelta || evt.originalEvent.detail;
          }
          if (delta != null) {
            evt.preventDefault();
            if (evt.type === 'DOMMouseScroll') {
              delta = delta * 40;
            }
            return this.search_results.scrollTop(delta + this.search_results.scrollTop());
          }
        };

        Chosen.prototype.blur_test = function(evt) {
          if (!this.active_field && this.container.hasClass("chosen-container-active")) {
            return this.close_field();
          }
        };

        Chosen.prototype.close_field = function() {
          $(this.container[0].ownerDocument).unbind("click.chosen", this.click_test_action);
          this.active_field = false;
          this.results_hide();
          this.container.removeClass("chosen-container-active");
          this.clear_backstroke();
          this.show_search_field_default();
          return this.search_field_scale();
        };

        Chosen.prototype.activate_field = function() {
          this.container.addClass("chosen-container-active");
          this.active_field = true;
          this.search_field.val(this.search_field.val());
          return this.search_field.focus();
        };

        Chosen.prototype.test_active_click = function(evt) {
          var active_container;
          active_container = $(evt.target).closest('.chosen-container');
          if (active_container.length && this.container[0] === active_container[0]) {
            return this.active_field = true;
          } else {
            return this.close_field();
          }
        };

        Chosen.prototype.results_build = function() {
          this.parsing = true;
          this.selected_option_count = null;
          this.results_data = SelectParser.select_to_array(this.form_field);
          if (this.is_multiple) {
            this.search_choices.find("li.search-choice").remove();
          } else if (!this.is_multiple) {
            this.single_set_selected_text();
            if (this.disable_search || this.form_field.options.length <= this.disable_search_threshold) {
              this.search_field[0].readOnly = true;
              this.container.addClass("chosen-container-single-nosearch");
            } else {
              this.search_field[0].readOnly = false;
              this.container.removeClass("chosen-container-single-nosearch");
            }
          }
          this.update_results_content(this.results_option_build({
            first: true
          }));
          this.search_field_disabled();
          this.show_search_field_default();
          this.search_field_scale();
          return this.parsing = false;
        };

        Chosen.prototype.result_do_highlight = function(el) {
          var high_bottom, high_top, maxHeight, visible_bottom, visible_top;
          if (el.length) {
            this.result_clear_highlight();
            this.result_highlight = el;
            this.result_highlight.addClass("highlighted");
            maxHeight = parseInt(this.search_results.css("maxHeight"), 10);
            visible_top = this.search_results.scrollTop();
            visible_bottom = maxHeight + visible_top;
            high_top = this.result_highlight.position().top + this.search_results.scrollTop();
            high_bottom = high_top + this.result_highlight.outerHeight();
            if (high_bottom >= visible_bottom) {
              return this.search_results.scrollTop((high_bottom - maxHeight) > 0 ? high_bottom - maxHeight : 0);
            } else if (high_top < visible_top) {
              return this.search_results.scrollTop(high_top);
            }
          }
        };

        Chosen.prototype.result_clear_highlight = function() {
          if (this.result_highlight) {
            this.result_highlight.removeClass("highlighted");
          }
          return this.result_highlight = null;
        };

        Chosen.prototype.results_show = function() {
          if (this.is_multiple && this.max_selected_options <= this.choices_count()) {
            this.form_field_jq.trigger("chosen:maxselected", {
              chosen: this
            });
            return false;
          }
          this.container.addClass("chosen-with-drop");
          this.results_showing = true;
          this.search_field.focus();
          this.search_field.val(this.search_field.val());
          this.winnow_results();
          return this.form_field_jq.trigger("chosen:showing_dropdown", {
            chosen: this
          });
        };

        Chosen.prototype.update_results_content = function(content) {
          return this.search_results.html(content);
        };

        Chosen.prototype.results_hide = function() {
          if (this.results_showing) {
            this.result_clear_highlight();
            this.container.removeClass("chosen-with-drop");
            this.form_field_jq.trigger("chosen:hiding_dropdown", {
              chosen: this
            });
          }
          return this.results_showing = false;
        };

        Chosen.prototype.set_tab_index = function(el) {
          var ti;
          if (this.form_field.tabIndex) {
            ti = this.form_field.tabIndex;
            this.form_field.tabIndex = -1;
            return this.search_field[0].tabIndex = ti;
          }
        };

        Chosen.prototype.set_label_behavior = function() {
          var _this = this;
          this.form_field_label = this.form_field_jq.parents("label");
          if (!this.form_field_label.length && this.form_field.id.length) {
            this.form_field_label = $("label[for='" + this.form_field.id + "']");
          }
          if (this.form_field_label.length > 0) {
            return this.form_field_label.bind('click.chosen', function(evt) {
              if (_this.is_multiple) {
                return _this.container_mousedown(evt);
              } else {
                return _this.activate_field();
              }
            });
          }
        };

        Chosen.prototype.show_search_field_default = function() {
          if (this.is_multiple && this.choices_count() < 1 && !this.active_field) {
            this.search_field.val(this.default_text);
            return this.search_field.addClass("default");
          } else {
            this.search_field.val("");
            return this.search_field.removeClass("default");
          }
        };

        Chosen.prototype.search_results_mouseup = function(evt) {
          var target;
          target = $(evt.target).hasClass("active-result") ? $(evt.target) : $(evt.target).parents(".active-result").first();
          if (target.length) {
            this.result_highlight = target;
            this.result_select(evt);
            return this.search_field.focus();
          }
        };

        Chosen.prototype.search_results_mouseover = function(evt) {
          var target;
          target = $(evt.target).hasClass("active-result") ? $(evt.target) : $(evt.target).parents(".active-result").first();
          if (target) {
            return this.result_do_highlight(target);
          }
        };

        Chosen.prototype.search_results_mouseout = function(evt) {
          if ($(evt.target).hasClass("active-result" || $(evt.target).parents('.active-result').first())) {
            return this.result_clear_highlight();
          }
        };

        Chosen.prototype.choice_build = function(item) {
          var choice, close_link,
            _this = this;
          choice = $('<li />', {
            "class": "search-choice"
          }).html("<span>" + (this.choice_label(item)) + "</span>");
          if (item.disabled) {
            choice.addClass('search-choice-disabled');
          } else {
            close_link = $('<a />', {
              "class": 'search-choice-close',
              'data-option-array-index': item.array_index
            });
            close_link.bind('click.chosen', function(evt) {
              return _this.choice_destroy_link_click(evt);
            });
            choice.append(close_link);
          }
          return this.search_container.before(choice);
        };

        Chosen.prototype.choice_destroy_link_click = function(evt) {
          evt.preventDefault();
          evt.stopPropagation();
          if (!this.is_disabled) {
            return this.choice_destroy($(evt.target));
          }
        };

        Chosen.prototype.choice_destroy = function(link) {
          if (this.result_deselect(link[0].getAttribute("data-option-array-index"))) {
            this.show_search_field_default();
            if (this.is_multiple && this.choices_count() > 0 && this.search_field.val().length < 1) {
              this.results_hide();
            }
            link.parents('li').first().remove();
            return this.search_field_scale();
          }
        };

        Chosen.prototype.results_reset = function() {
          this.reset_single_select_options();
          this.form_field.options[0].selected = true;
          this.single_set_selected_text();
          this.show_search_field_default();
          this.results_reset_cleanup();
          this.form_field_jq.trigger("change");
          if (this.active_field) {
            return this.results_hide();
          }
        };

        Chosen.prototype.results_reset_cleanup = function() {
          this.current_selectedIndex = this.form_field.selectedIndex;
          return this.selected_item.find("abbr").remove();
        };

        Chosen.prototype.result_select = function(evt) {
          var high, item;
          if (this.result_highlight) {
            high = this.result_highlight;
            this.result_clear_highlight();
            if (this.is_multiple && this.max_selected_options <= this.choices_count()) {
              this.form_field_jq.trigger("chosen:maxselected", {
                chosen: this
              });
              return false;
            }
            if (this.is_multiple) {
              high.removeClass("active-result");
            } else {
              this.reset_single_select_options();
            }
            high.addClass("result-selected");
            item = this.results_data[high[0].getAttribute("data-option-array-index")];
            item.selected = true;
            this.form_field.options[item.options_index].selected = true;
            this.selected_option_count = null;
            if (this.is_multiple) {
              this.choice_build(item);
            } else {
              this.single_set_selected_text(this.choice_label(item));
            }
            if (!((evt.metaKey || evt.ctrlKey) && this.is_multiple)) {
              this.results_hide();
            }
            this.search_field.val("");
            if (this.is_multiple || this.form_field.selectedIndex !== this.current_selectedIndex) {
              this.form_field_jq.trigger("change", {
                'selected': this.form_field.options[item.options_index].value
              });
            }
            this.current_selectedIndex = this.form_field.selectedIndex;
            evt.preventDefault();
            return this.search_field_scale();
          }
        };

        Chosen.prototype.single_set_selected_text = function(text) {
          if (text == null) {
            text = this.default_text;
          }
          if (text === this.default_text) {
            this.selected_item.addClass("chosen-default");
          } else {
            this.single_deselect_control_build();
            this.selected_item.removeClass("chosen-default");
          }
          return this.selected_item.find("span").html(text);
        };

        Chosen.prototype.result_deselect = function(pos) {
          var result_data;
          result_data = this.results_data[pos];
          if (!this.form_field.options[result_data.options_index].disabled) {
            result_data.selected = false;
            this.form_field.options[result_data.options_index].selected = false;
            this.selected_option_count = null;
            this.result_clear_highlight();
            if (this.results_showing) {
              this.winnow_results();
            }
            this.form_field_jq.trigger("change", {
              deselected: this.form_field.options[result_data.options_index].value
            });
            this.search_field_scale();
            return true;
          } else {
            return false;
          }
        };

        Chosen.prototype.single_deselect_control_build = function() {
          if (!this.allow_single_deselect) {
            return;
          }
          if (!this.selected_item.find("abbr").length) {
            this.selected_item.find("span").first().after("<abbr class=\"search-choice-close\"></abbr>");
          }
          return this.selected_item.addClass("chosen-single-with-deselect");
        };

        Chosen.prototype.get_search_text = function() {
          return $('<div/>').text($.trim(this.search_field.val())).html();
        };

        Chosen.prototype.winnow_results_set_highlight = function() {
          var do_high, selected_results;
          if (!this.result_highlight) {
            selected_results = !this.is_multiple ? this.search_results.find(".result-selected.active-result") : [];
            do_high = selected_results.length ? selected_results.first() : null;
            if (do_high != null) {
              return this.result_do_highlight(do_high);
            }
          }
        };

        Chosen.prototype.no_results = function(terms) {
          var no_results_html;
          no_results_html = $('<li class="no-results">' + this.results_none_found + ' "<span></span>"</li>');
          no_results_html.find("span").first().html(terms);
          this.search_results.append(no_results_html);
          return this.form_field_jq.trigger("chosen:no_results", {
            chosen: this
          });
        };

        Chosen.prototype.no_results_clear = function() {
          return this.search_results.find(".no-results").remove();
        };

        Chosen.prototype.keydown_arrow = function() {
          var next_sib;
          if (this.results_showing && this.result_highlight) {
            next_sib = this.result_highlight.nextAll("li.active-result").first();
            if (next_sib) {
              return this.result_do_highlight(next_sib);
            }
          } else {
            return this.results_show();
          }
        };

        Chosen.prototype.keyup_arrow = function() {
          var prev_sibs;
          if (!this.results_showing && !this.is_multiple) {
            return this.results_show();
          } else if (this.result_highlight) {
            prev_sibs = this.result_highlight.prevAll("li.active-result");
            if (prev_sibs.length) {
              return this.result_do_highlight(prev_sibs.first());
            } else {
              if (this.choices_count() > 0) {
                this.results_hide();
              }
              return this.result_clear_highlight();
            }
          }
        };

        Chosen.prototype.keydown_backstroke = function() {
          var next_available_destroy;
          if (this.pending_backstroke) {
            this.choice_destroy(this.pending_backstroke.find("a").first());
            return this.clear_backstroke();
          } else {
            next_available_destroy = this.search_container.siblings("li.search-choice").last();
            if (next_available_destroy.length && !next_available_destroy.hasClass("search-choice-disabled")) {
              this.pending_backstroke = next_available_destroy;
              if (this.single_backstroke_delete) {
                return this.keydown_backstroke();
              } else {
                return this.pending_backstroke.addClass("search-choice-focus");
              }
            }
          }
        };

        Chosen.prototype.clear_backstroke = function() {
          if (this.pending_backstroke) {
            this.pending_backstroke.removeClass("search-choice-focus");
          }
          return this.pending_backstroke = null;
        };

        Chosen.prototype.keydown_checker = function(evt) {
          var stroke, _ref1;
          stroke = (_ref1 = evt.which) != null ? _ref1 : evt.keyCode;
          this.search_field_scale();
          if (stroke !== 8 && this.pending_backstroke) {
            this.clear_backstroke();
          }
          switch (stroke) {
            case 8:
              this.backstroke_length = this.search_field.val().length;
              break;
            case 9:
              if (this.results_showing && !this.is_multiple) {
                this.result_select(evt);
              }
              this.mouse_on_container = false;
              break;
            case 13:
              if (this.results_showing) {
                evt.preventDefault();
              }
              break;
            case 32:
              if (this.disable_search) {
                evt.preventDefault();
              }
              break;
            case 38:
              evt.preventDefault();
              this.keyup_arrow();
              break;
            case 40:
              evt.preventDefault();
              this.keydown_arrow();
              break;
          }
        };

        Chosen.prototype.search_field_scale = function() {
          var div, f_width, h, style, style_block, styles, w, _i, _len;
          if (this.is_multiple) {
            h = 0;
            w = 0;
            style_block = "position:absolute; left: -1000px; top: -1000px; display:none;";
            styles = ['font-size', 'font-style', 'font-weight', 'font-family', 'line-height', 'text-transform', 'letter-spacing'];
            for (_i = 0, _len = styles.length; _i < _len; _i++) {
              style = styles[_i];
              style_block += style + ":" + this.search_field.css(style) + ";";
            }
            div = $('<div />', {
              'style': style_block
            });
            div.text(this.search_field.val());
            $('body').append(div);
            w = div.width() + 25;
            div.remove();
            f_width = this.container.outerWidth();
            if (w > f_width - 10) {
              w = f_width - 10;
            }
            return this.search_field.css({
              'width': w + 'px'
            });
          }
        };

        return Chosen;

      })(AbstractChosen);

    }).call(this);

//-------------------------------------------------------
//bookblock
//-------------------------------------------------------

    //---------------------------------------------------
    //modernizr_custom
    //---------------------------------------------------

        /* Modernizr 2.6.2 (Custom Build) | MIT & BSD
         * Build: http://modernizr.com/download/#-csstransforms3d-csstransitions-shiv-cssclasses-prefixed-teststyles-testprop-testallprops-prefixes-domprefixes-load
         */
        ;window.Modernizr=function(a,b,c){function z(a){j.cssText=a}function A(a,b){return z(m.join(a+";")+(b||""))}function B(a,b){return typeof a===b}function C(a,b){return!!~(""+a).indexOf(b)}function D(a,b){for(var d in a){var e=a[d];if(!C(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:B(f,"function")?f.bind(d||b):f}return!1}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+o.join(d+" ")+d).split(" ");return B(b,"string")||B(b,"undefined")?D(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),E(e,b,c))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},x={}.hasOwnProperty,y;!B(x,"undefined")&&!B(x.call,"undefined")?y=function(a,b){return x.call(a,b)}:y=function(a,b){return b in a&&B(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e}),q.csstransforms3d=function(){var a=!!F("perspective");return a&&"webkitPerspective"in g.style&&w("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},q.csstransitions=function(){return F("transition")};for(var G in q)y(q,G)&&(v=G.toLowerCase(),e[v]=q[G](),t.push((e[v]?"":"no-")+v));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)y(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},z(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.testProp=function(a){return D([a])},e.testAllProps=F,e.testStyles=w,e.prefixed=function(a,b,c){return b?F(a,b,c):F(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};

    //---------------------------------------------------
    //bookblock_min
    //---------------------------------------------------

        /**
         * bookblock.min.js v2.0.1
         * http://www.codrops.com
         *
         * Licensed under the MIT license.
         * http://www.opensource.org/licenses/mit-license.php
         * 
         * Copyright 2013, Codrops
         * http://www.codrops.com
         */
         (function(c){var a=c.document,d=c.Modernizr;d.addTest("csstransformspreserve3d",function(){var h=d.prefixed("transformStyle");var g="preserve-3d";var f;if(!h){return false}h=h.replace(/([A-Z])/g,function(j,i){return"-"+i.toLowerCase()}).replace(/^ms-/,"-ms-");d.testStyles("#modernizr{"+h+":"+g+";}",function(i,j){f=c.getComputedStyle?getComputedStyle(i,null).getPropertyValue(h):""});return(f===g)});function e(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}return g}function b(g,f){this.el=g;this.options=e(this.defaults,f);this._init()}b.prototype={defaults:{orientation:"vertical",direction:"ltr",speed:1000,easing:"ease-in-out",shadows:true,shadowSides:0.2,shadowFlip:0.1,circular:false,nextEl:"",prevEl:"",autoplay:false,interval:3000,onEndFlip:function(f,h,g){return false},onBeforeFlip:function(f){return false}},_init:function(){this.el.className+=" bb-"+this.options.orientation;this.items=Array.prototype.slice.call(this.el.querySelectorAll(".bb-item"));this.itemsCount=this.items.length;this.currentIdx=0;this.previous=-1;this.current=this.items[this.currentIdx];this.current.style.display="block";this.elWidth=this.el.offsetWidth;var f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.transEndEventName=f[d.prefixed("transition")];this.support=d.csstransitions&&d.csstransforms3d&&d.csstransformspreserve3d;this._initEvents();if(this.options.autoplay){this.options.circular=true;this._startSlideshow()}},_initEvents:function(){var f=this;if(this.options.nextEl!==""){a.querySelector(this.options.nextEl).addEventListener("click",function(){f._action("next");return false});a.querySelector(this.options.nextEl).addEventListener("touchstart",function(){f._action("next");return false})}if(this.options.prevEl!==""){a.querySelector(this.options.prevEl).addEventListener("click",function(){f._action("prev");return false});a.querySelector(this.options.prevEl).addEventListener("touchstart",function(){f._action("prev");return false})}c.addEventListener("resize",function(){f._resizeHandler()})},_action:function(f,g){this._stopSlideshow();this._navigate(f,g)},_navigate:function(f,g){if(this.isAnimating){return false}this.options.onBeforeFlip(this.currentIdx);this.isAnimating=true;this.current=this.items[this.currentIdx];if(g!==undefined){this.currentIdx=g}else{if(f==="next"&&this.options.direction==="ltr"||f==="prev"&&this.options.direction==="rtl"){if(!this.options.circular&&this.currentIdx===this.itemsCount-1){this.end=true}else{this.previous=this.currentIdx;this.currentIdx=this.currentIdx<this.itemsCount-1?this.currentIdx+1:0}}else{if(f==="prev"&&this.options.direction==="ltr"||f==="next"&&this.options.direction==="rtl"){if(!this.options.circular&&this.currentIdx===0){this.end=true}else{this.previous=this.currentIdx;this.currentIdx=this.currentIdx>0?this.currentIdx-1:this.itemsCount-1}}}}this.nextItem=!this.options.circular&&this.end?this.current:this.items[this.currentIdx];this.items.forEach(function(j,h){j.style.display="none"});if(!this.support){this._layoutNoSupport(f)}else{this._layout(f)}},_layoutNoSupport:function(g){this.nextItem.style.display="block";this.end=false;this.isAnimating=false;var f=g==="next"&&this.currentIdx===this.itemsCount-1||g==="prev"&&this.currentIdx===0;this.options.onEndFlip(this.previous,this.currentIdx,f)},_layout:function(i){var o=this,j=this._addSide("left",i),p=this._addSide("middle",i),l=this._addSide("right",i),f=j.querySelector("div.bb-overlay"),m=p.querySelector("div.bb-front").querySelector("div.bb-flipoverlay"),n=p.querySelector("div.bb-back").querySelector("div.bb-flipoverlay"),k=l.querySelector("div.bb-overlay"),h=this.end?400:this.options.speed;var g=this.items[0];this.el.insertBefore(j,g);this.el.insertBefore(p,g);this.el.insertBefore(l,g);j.style.zIndex=102;p.style.zIndex=103;l.style.zIndex=101;p.style.transitionDuration=h+"ms";p.style.transitionTimingFunction=this.options.easing;p.addEventListener(this.transEndEventName,function(r){if((" "+r.target.className+" ").replace(/[\n\t]/g," ").indexOf(" bb-page ")>-1){Array.prototype.slice.call(o.el.querySelectorAll(".bb-page")).forEach(function(t,s){o.el.removeChild(t)});o.nextItem.style.display="block";o.end=false;o.isAnimating=false;var q=i==="next"&&o.currentIdx===o.itemsCount-1||i==="prev"&&o.currentIdx===0;o.options.onEndFlip(o.previous,o.currentIdx,q)}});if(i==="prev"){p.className+=" bb-flip-initial"}if(this.options.shadows&&!this.end){if(i==="next"){m.style.transition="opacity "+this.options.speed/2+"ms linear";n.style.transition="opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms";n.style.opacity=this.options.shadowFlip;f.style.transition="opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms";k.style.transition="opacity "+this.options.speed/2+"ms linear";k.style.opacity=this.options.shadowSides}else{if(i==="prev"){m.style.transition="opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms";m.style.opacity=this.options.shadowFlip;n.style.transition="opacity "+this.options.speed/2+"ms linear";f.style.transition="opacity "+this.options.speed/2+"ms linear";f.style.opacity=this.options.shadowSides;k.style.transition="opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms"}}}setTimeout(function(){p.className+=o.end?" bb-flip-"+i+"-end":" bb-flip-"+i;if(o.options.shadows&&!o.end){m.style.opacity=i==="next"?o.options.shadowFlip:0;n.style.opacity=i==="next"?0:o.options.shadowFlip;f.style.opacity=i==="next"?o.options.shadowSides:0;k.style.opacity=i==="next"?0:o.options.shadowSides}},25)},_addSide:function(h,g){var j=a.createElement("div");j.className="bb-page";switch(h){case"left":var f=g==="next"?this.current.innerHTML:this.nextItem.innerHTML;j.innerHTML='<div class="bb-back"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+f+'</div></div><div class="bb-overlay"></div></div></div>';break;case"middle":var k=g==="next"?this.current.innerHTML:this.nextItem.innerHTML;var i=g==="next"?this.nextItem.innerHTML:this.current.innerHTML;j.innerHTML='<div class="bb-front"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+k+'</div></div><div class="bb-flipoverlay"></div></div></div><div class="bb-back"><div class="bb-outer"><div class="bb-content" style="width:'+this.elWidth+'px"><div class="bb-inner">'+i+'</div></div><div class="bb-flipoverlay"></div></div></div>';break;case"right":var f=g==="next"?this.nextItem.innerHTML:this.current.innerHTML;j.innerHTML='<div class="bb-front"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+f+'</div></div><div class="bb-overlay"></div></div></div>';break}return j},_startSlideshow:function(){var f=this;this.slideshow=setTimeout(function(){f._navigate("next");if(f.options.autoplay){f._startSlideshow()}},this.options.interval)},_stopSlideshow:function(){if(this.options.autoplay){clearTimeout(this.slideshow);this.options.autoplay=false}},next:function(){this._action(this.options.direction==="ltr"?"next":"prev")},prev:function(){this._action(this.options.direction==="ltr"?"prev":"next")},jump:function(g){g-=1;if(g===this.currentIdx||g>=this.itemsCount||g<0){return false}var f;if(this.options.direction==="ltr"){f=g>this.currentIdx?"next":"prev"}else{f=g>this.currentIdx?"prev":"next"}this._action(f,g)},last:function(){this.jump(this.itemsCount)},first:function(){this.jump(1)},_resizeHandler:function(){var f=this;function g(){f._resize();f._resizeTimeout=null}if(this._resizeTimeout){clearTimeout(this._resizeTimeout)}this._resizeTimeout=setTimeout(g,50)},_resize:function(){this.elWidth=this.el.offsetWidth},isActive:function(){return this.isAnimating},update:function(){var f=this.items[this.current];this.items=Array.prototype.slice.call(this.el.querySelectorAll(".bb-item"));this.itemsCount=this.items.length;this.currentIdx=this.items.indexOf(f)},destroy:function(){if(this.options.autoplay){this._stopSlideshow()}this.el.className=this.el.className.replace(new RegExp("(^|\\s+)bb-"+this.options.orientation+"(\\s+|$)")," ");this.items.forEach(function(g,f){g.style.display="block"});if(this.options.nextEl!==""){this.options.nextEl.removeEventListener("click");this.options.nextEl.removeEventListener("touchstart")}if(this.options.prevEl!==""){this.options.prevEl.removeEventListener("click");this.options.prevEl.removeEventListener("touchstart")}c.removeEventListener("debouncedresize")}};c.BookBlock=b})(window);

    //---------------------------------------------------
    //jquery_bookblock_min
    //---------------------------------------------------

        /**
         * jquery.bookblock.min.js v2.0.1
         * http://www.codrops.com
         *
         * Licensed under the MIT license.
         * http://www.opensource.org/licenses/mit-license.php
         * 
         * Copyright 2013, Codrops
         * http://www.codrops.com
         */
        (function(f,g,d){var c=f(g),e=g.Modernizr;e.addTest("csstransformspreserve3d",function(){var l=e.prefixed("transformStyle");var k="preserve-3d";var j;if(!l){return false}l=l.replace(/([A-Z])/g,function(n,m){return"-"+m.toLowerCase()}).replace(/^ms-/,"-ms-");e.testStyles("#modernizr{"+l+":"+k+";}",function(m,n){j=g.getComputedStyle?getComputedStyle(m,null).getPropertyValue(l):""});return(j===k)});var a=f.event,b,i;b=a.special.debouncedresize={setup:function(){f(this).on("resize",b.handler)},teardown:function(){f(this).off("resize",b.handler)},handler:function(n,j){var m=this,l=arguments,k=function(){n.type="debouncedresize";a.dispatch.apply(m,l)};if(i){clearTimeout(i)}j?k():i=setTimeout(k,b.threshold)},threshold:150};f.BookBlock=function(j,k){this.$el=f(k);this._init(j)};f.BookBlock.defaults={orientation:"vertical",direction:"ltr",speed:1000,easing:"ease-in-out",shadows:true,shadowSides:0.2,shadowFlip:0.1,circular:false,nextEl:"",prevEl:"",autoplay:false,interval:3000,onEndFlip:function(j,l,k){return false},onBeforeFlip:function(j){return false}};f.BookBlock.prototype={_init:function(j){this.options=f.extend(true,{},f.BookBlock.defaults,j);this.$el.addClass("bb-"+this.options.orientation);this.$items=this.$el.children(".bb-item").hide();this.itemsCount=this.$items.length;this.current=0;this.previous=-1;this.$current=this.$items.eq(this.current).show();this.elWidth=this.$el.width();var k={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.transEndEventName=k[e.prefixed("transition")]+".bookblock";this.support=e.csstransitions&&e.csstransforms3d&&e.csstransformspreserve3d;this._initEvents();if(this.options.autoplay){this.options.circular=true;this._startSlideshow()}},_initEvents:function(){var j=this;if(this.options.nextEl!==""){f(this.options.nextEl).on("click.bookblock touchstart.bookblock",function(){j._action("next");return false})}if(this.options.prevEl!==""){f(this.options.prevEl).on("click.bookblock touchstart.bookblock",function(){j._action("prev");return false})}c.on("debouncedresize",function(){j.elWidth=j.$el.width()})},_action:function(j,k){this._stopSlideshow();this._navigate(j,k)},_navigate:function(j,k){if(this.isAnimating){return false}this.options.onBeforeFlip(this.current);this.isAnimating=true;this.$current=this.$items.eq(this.current);if(k!==d){this.current=k}else{if(j==="next"&&this.options.direction==="ltr"||j==="prev"&&this.options.direction==="rtl"){if(!this.options.circular&&this.current===this.itemsCount-1){this.end=true}else{this.previous=this.current;this.current=this.current<this.itemsCount-1?this.current+1:0}}else{if(j==="prev"&&this.options.direction==="ltr"||j==="next"&&this.options.direction==="rtl"){if(!this.options.circular&&this.current===0){this.end=true}else{this.previous=this.current;this.current=this.current>0?this.current-1:this.itemsCount-1}}}}this.$nextItem=!this.options.circular&&this.end?this.$current:this.$items.eq(this.current);if(!this.support){this._layoutNoSupport(j)}else{this._layout(j)}},_layoutNoSupport:function(k){this.$items.hide();this.$nextItem.show();this.end=false;this.isAnimating=false;var j=k==="next"&&this.current===this.itemsCount-1||k==="prev"&&this.current===0;this.options.onEndFlip(this.previous,this.current,j)},_layout:function(l){var v=this,u=this._addSide("left",l),o=this._addSide("middle",l),j=this._addSide("right",l),r=u.find("div.bb-overlay"),t=o.find("div.bb-flipoverlay:first"),w=o.find("div.bb-flipoverlay:last"),s=j.find("div.bb-overlay"),k=this.end?400:this.options.speed;this.$items.hide();this.$el.prepend(u,o,j);o.css({transitionDuration:k+"ms",transitionTimingFunction:this.options.easing}).on(this.transEndEventName,function(y){if(f(y.target).hasClass("bb-page")){v.$el.children(".bb-page").remove();v.$nextItem.show();v.end=false;v.isAnimating=false;var x=l==="next"&&v.current===v.itemsCount-1||l==="prev"&&v.current===0;v.options.onEndFlip(v.previous,v.current,x)}});if(l==="prev"){o.addClass("bb-flip-initial")}if(this.options.shadows&&!this.end){var n=(l==="next")?{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms"}:{transition:"opacity "+this.options.speed/2+"ms linear",opacity:this.options.shadowSides},q=(l==="next")?{transition:"opacity "+this.options.speed/2+"ms linear"}:{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms",opacity:this.options.shadowFlip},m=(l==="next")?{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms",opacity:this.options.shadowFlip}:{transition:"opacity "+this.options.speed/2+"ms linear"},p=(l==="next")?{transition:"opacity "+this.options.speed/2+"ms linear",opacity:this.options.shadowSides}:{transition:"opacity "+this.options.speed/2+"ms linear "+this.options.speed/2+"ms"};t.css(q);w.css(m);r.css(n);s.css(p)}setTimeout(function(){o.addClass(v.end?"bb-flip-"+l+"-end":"bb-flip-"+l);if(v.options.shadows&&!v.end){t.css({opacity:l==="next"?v.options.shadowFlip:0});w.css({opacity:l==="next"?0:v.options.shadowFlip});r.css({opacity:l==="next"?v.options.shadowSides:0});s.css({opacity:l==="next"?0:v.options.shadowSides})}},25)},_addSide:function(l,k){var j;switch(l){case"left":j=f('<div class="bb-page"><div class="bb-back"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+(k==="next"?this.$current.html():this.$nextItem.html())+'</div></div><div class="bb-overlay"></div></div></div></div>').css("z-index",102);break;case"middle":j=f('<div class="bb-page"><div class="bb-front"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+(k==="next"?this.$current.html():this.$nextItem.html())+'</div></div><div class="bb-flipoverlay"></div></div></div><div class="bb-back"><div class="bb-outer"><div class="bb-content" style="width:'+this.elWidth+'px"><div class="bb-inner">'+(k==="next"?this.$nextItem.html():this.$current.html())+'</div></div><div class="bb-flipoverlay"></div></div></div></div>').css("z-index",103);break;case"right":j=f('<div class="bb-page"><div class="bb-front"><div class="bb-outer"><div class="bb-content"><div class="bb-inner">'+(k==="next"?this.$nextItem.html():this.$current.html())+'</div></div><div class="bb-overlay"></div></div></div></div>').css("z-index",101);break}return j},_startSlideshow:function(){var j=this;this.slideshow=setTimeout(function(){j._navigate("next");if(j.options.autoplay){j._startSlideshow()}},this.options.interval)},_stopSlideshow:function(){if(this.options.autoplay){clearTimeout(this.slideshow);this.options.autoplay=false}},next:function(){this._action(this.options.direction==="ltr"?"next":"prev")},prev:function(){this._action(this.options.direction==="ltr"?"prev":"next")},jump:function(k){k-=1;if(k===this.current||k>=this.itemsCount||k<0){return false}var j;if(this.options.direction==="ltr"){j=k>this.current?"next":"prev"}else{j=k>this.current?"prev":"next"}this._action(j,k)},last:function(){this.jump(this.itemsCount)},first:function(){this.jump(1)},isActive:function(){return this.isAnimating},update:function(){var j=this.$items.eq(this.current);this.$items=this.$el.children(".bb-item");this.itemsCount=this.$items.length;this.current=j.index()},destroy:function(){if(this.options.autoplay){this._stopSlideshow()}this.$el.removeClass("bb-"+this.options.orientation);this.$items.show();if(this.options.nextEl!==""){f(this.options.nextEl).off(".bookblock")}if(this.options.prevEl!==""){f(this.options.prevEl).off(".bookblock")}c.off("debouncedresize")}};var h=function(j){if(g.console){g.console.error(j)}};f.fn.bookblock=function(k){if(typeof k==="string"){var j=Array.prototype.slice.call(arguments,1);this.each(function(){var l=f.data(this,"bookblock");if(!l){h("cannot call methods on bookblock prior to initialization; attempted to call method '"+k+"'");return}if(!f.isFunction(l[k])||k.charAt(0)==="_"){h("no such method '"+k+"' for bookblock instance");return}l[k].apply(l,j)})}else{this.each(function(){var l=f.data(this,"bookblock");if(l){l._init()}else{l=f.data(this,"bookblock",new f.BookBlock(k,this))}})}return this}})(jQuery,window);

    //---------------------------------------------------
    //jquerypp_custom
    //---------------------------------------------------

        (function() {

            var event = jQuery.event,

                //helper that finds handlers by type and calls back a function, this is basically handle
                // events - the events object
                // types - an array of event types to look for
                // callback(type, handlerFunc, selector) - a callback
                // selector - an optional selector to filter with, if there, matches by selector
                //     if null, matches anything, otherwise, matches with no selector
                findHelper = function( events, types, callback, selector ) {
                    var t, type, typeHandlers, all, h, handle, 
                        namespaces, namespace,
                        match;
                    for ( t = 0; t < types.length; t++ ) {
                        type = types[t];
                        all = type.indexOf(".") < 0;
                        if (!all ) {
                            namespaces = type.split(".");
                            type = namespaces.shift();
                            namespace = new RegExp("(^|\\.)" + namespaces.slice(0).sort().join("\\.(?:.*\\.)?") + "(\\.|$)");
                        }
                        typeHandlers = (events[type] || []).slice(0);

                        for ( h = 0; h < typeHandlers.length; h++ ) {
                            handle = typeHandlers[h];
                            
                            match = (all || namespace.test(handle.namespace));
                            
                            if(match){
                                if(selector){
                                    if (handle.selector === selector  ) {
                                        callback(type, handle.origHandler || handle.handler);
                                    }
                                } else if (selector === null){
                                    callback(type, handle.origHandler || handle.handler, handle.selector);
                                }
                                else if (!handle.selector ) {
                                    callback(type, handle.origHandler || handle.handler);
                                    
                                } 
                            }
                            
                            
                        }
                    }
                };

            /**
             * Finds event handlers of a given type on an element.
             * @param {HTMLElement} el
             * @param {Array} types an array of event names
             * @param {String} [selector] optional selector
             * @return {Array} an array of event handlers
             */
            event.find = function( el, types, selector ) {
                var events = ( $._data(el) || {} ).events,
                    handlers = [],
                    t, liver, live;

                if (!events ) {
                    return handlers;
                }
                findHelper(events, types, function( type, handler ) {
                    handlers.push(handler);
                }, selector);
                return handlers;
            };
            /**
             * Finds all events.  Group by selector.
             * @param {HTMLElement} el the element
             * @param {Array} types event types
             */
            event.findBySelector = function( el, types ) {
                var events = $._data(el).events,
                    selectors = {},
                    //adds a handler for a given selector and event
                    add = function( selector, event, handler ) {
                        var select = selectors[selector] || (selectors[selector] = {}),
                            events = select[event] || (select[event] = []);
                        events.push(handler);
                    };

                if (!events ) {
                    return selectors;
                }
                //first check live:
                /*$.each(events.live || [], function( i, live ) {
                    if ( $.inArray(live.origType, types) !== -1 ) {
                        add(live.selector, live.origType, live.origHandler || live.handler);
                    }
                });*/
                //then check straight binds
                findHelper(events, types, function( type, handler, selector ) {
                    add(selector || "", type, handler);
                }, null);

                return selectors;
            };
            event.supportTouch = "ontouchend" in document;
            
            $.fn.respondsTo = function( events ) {
                if (!this.length ) {
                    return false;
                } else {
                    //add default ?
                    return event.find(this[0], $.isArray(events) ? events : [events]).length > 0;
                }
            };
            $.fn.triggerHandled = function( event, data ) {
                event = (typeof event == "string" ? $.Event(event) : event);
                this.trigger(event, data);
                return event.handled;
            };
            /**
             * Only attaches one event handler for all types ...
             * @param {Array} types llist of types that will delegate here
             * @param {Object} startingEvent the first event to start listening to
             * @param {Object} onFirst a function to call 
             */
            event.setupHelper = function( types, startingEvent, onFirst ) {
                if (!onFirst ) {
                    onFirst = startingEvent;
                    startingEvent = null;
                }
                var add = function( handleObj ) {

                    var bySelector, selector = handleObj.selector || "";
                    if ( selector ) {
                        bySelector = event.find(this, types, selector);
                        if (!bySelector.length ) {
                            $(this).delegate(selector, startingEvent, onFirst);
                        }
                    }
                    else {
                        //var bySelector = event.find(this, types, selector);
                        if (!event.find(this, types, selector).length ) {
                            event.add(this, startingEvent, onFirst, {
                                selector: selector,
                                delegate: this
                            });
                        }

                    }

                },
                    remove = function( handleObj ) {
                        var bySelector, selector = handleObj.selector || "";
                        if ( selector ) {
                            bySelector = event.find(this, types, selector);
                            if (!bySelector.length ) {
                                $(this).undelegate(selector, startingEvent, onFirst);
                            }
                        }
                        else {
                            if (!event.find(this, types, selector).length ) {
                                event.remove(this, startingEvent, onFirst, {
                                    selector: selector,
                                    delegate: this
                                });
                            }
                        }
                    };
                $.each(types, function() {
                    event.special[this] = {
                        add: add,
                        remove: remove,
                        setup: function() {},
                        teardown: function() {}
                    };
                });
            };
        })(jQuery);
        (function($){
        var isPhantom = /Phantom/.test(navigator.userAgent),
            supportTouch = !isPhantom && "ontouchend" in document,
            scrollEvent = "touchmove scroll",
            // Use touch events or map it to mouse events
            touchStartEvent = supportTouch ? "touchstart" : "mousedown",
            touchStopEvent = supportTouch ? "touchend" : "mouseup",
            touchMoveEvent = supportTouch ? "touchmove" : "mousemove",
            data = function(event){
                var d = event.originalEvent.touches ?
                    event.originalEvent.touches[ 0 ] :
                    event;
                return {
                    time: (new Date).getTime(),
                    coords: [ d.pageX, d.pageY ],
                    origin: $( event.target )
                };
            };

        /**
         * @add jQuery.event.swipe
         */
        var swipe = $.event.swipe = {
            /**
             * @attribute delay
             * Delay is the upper limit of time the swipe motion can take in milliseconds.  This defaults to 500.
             * 
             * A user must perform the swipe motion in this much time.
             */
            delay : 0,
            /**
             * @attribute max
             * The maximum distance the pointer must travel in pixels.  The default is 75 pixels.
             */
            max : 75,
            /**
             * @attribute min
             * The minimum distance the pointer must travel in pixels.  The default is 30 pixels.
             */
            min : 30
        };

        $.event.setupHelper( [

        /**
         * @hide
         * @attribute swipe
         */
        "swipe",
        /**
         * @hide
         * @attribute swipeleft
         */
        'swipeleft',
        /**
         * @hide
         * @attribute swiperight
         */
        'swiperight',
        /**
         * @hide
         * @attribute swipeup
         */
        'swipeup',
        /**
         * @hide
         * @attribute swipedown
         */
        'swipedown'], touchStartEvent, function(ev){
            var
                // update with data when the event was started
                start = data(ev),
                stop,
                delegate = ev.delegateTarget || ev.currentTarget,
                selector = ev.handleObj.selector,
                entered = this;
            
            function moveHandler(event){
                if ( !start ) {
                    return;
                }
                // update stop with the data from the current event
                stop = data(event);

                // prevent scrolling
                if ( Math.abs( start.coords[0] - stop.coords[0] ) > 10 ) {
                    event.preventDefault();
                }
            };

            // Attach to the touch move events
            $(document.documentElement).bind(touchMoveEvent, moveHandler)
                .one(touchStopEvent, function(event){
                    $(this).unbind( touchMoveEvent, moveHandler);
                    // if start and stop contain data figure out if we have a swipe event
                    if ( start && stop ) {
                        // calculate the distance between start and stop data
                        var deltaX = Math.abs(start.coords[0] - stop.coords[0]),
                            deltaY = Math.abs(start.coords[1] - stop.coords[1]),
                            distance = Math.sqrt(deltaX*deltaX+deltaY*deltaY);

                        // check if the delay and distance are matched
                        if ( stop.time - start.time < swipe.delay && distance >= swipe.min ) {
                            var events = ['swipe'];
                            // check if we moved horizontally
                            if( deltaX >= swipe.min && deltaY < swipe.min) {
                                // based on the x coordinate check if we moved left or right
                                events.push( start.coords[0] > stop.coords[0] ? "swipeleft" : "swiperight" );
                            } else
                            // check if we moved vertically
                            if(deltaY >= swipe.min && deltaX < swipe.min){
                                // based on the y coordinate check if we moved up or down
                                events.push( start.coords[1] < stop.coords[1] ? "swipedown" : "swipeup" );
                            }

                            // trigger swipe events on this guy
                            $.each($.event.find(delegate, events, selector), function(){
                                this.call(entered, ev, {start : start, end: stop})
                            })
                        
                        }
                    }
                    // reset start and stop
                    start = stop = undefined;
                })
        });

        })(jQuery)

//-------------------------------------------------------
//block_ui
//-------------------------------------------------------
    
    /*!
     * jQuery blockUI plugin
     * Version 2.64.0-2013.07.18
     * @requires jQuery v1.7 or later
     *
     * Examples at: http://malsup.com/jquery/block/
     * Copyright (c) 2007-2013 M. Alsup
     * Dual licensed under the MIT and GPL licenses:
     * http://www.opensource.org/licenses/mit-license.php
     * http://www.gnu.org/licenses/gpl.html
     *
     * Thanks to Amir-Hossein Sobhi for some excellent contributions!
     */

    ;(function() {
    /*jshint eqeqeq:false curly:false latedef:false */
    "use strict";

        function setup($) {
            $.fn._fadeIn = $.fn.fadeIn;

            var noOp = $.noop || function() {};

            // this bit is to ensure we don't call setExpression when we shouldn't (with extra muscle to handle
            // confusing userAgent strings on Vista)
            var msie = /MSIE/.test(navigator.userAgent);
            var ie6  = /MSIE 6.0/.test(navigator.userAgent) && ! /MSIE 8.0/.test(navigator.userAgent);
            var mode = document.documentMode || 0;
            var setExpr = $.isFunction( document.createElement('div').style.setExpression );

            // global $ methods for blocking/unblocking the entire page
            $.blockUI   = function(opts) { install(window, opts); };
            $.unblockUI = function(opts) { remove(window, opts); };

            // convenience method for quick growl-like notifications  (http://www.google.com/search?q=growl)
            $.growlUI = function(title, message, timeout, onClose) {
                var $m = $('<div class="growlUI"></div>');
                if (title) $m.append('<h1>'+title+'</h1>');
                if (message) $m.append('<h2>'+message+'</h2>');
                if (timeout === undefined) timeout = 3000;

                // Added by konapun: Set timeout to 30 seconds if this growl is moused over, like normal toast notifications
                var callBlock = function(opts) {
                    opts = opts || {};

                    $.blockUI({
                        message: $m,
                        fadeIn : typeof opts.fadeIn  !== 'undefined' ? opts.fadeIn  : 700,
                        fadeOut: typeof opts.fadeOut !== 'undefined' ? opts.fadeOut : 1000,
                        timeout: typeof opts.timeout !== 'undefined' ? opts.timeout : timeout,
                        centerY: false,
                        showOverlay: false,
                        onUnblock: onClose,
                        css: $.blockUI.defaults.growlCSS
                    });
                };

                callBlock();
                var nonmousedOpacity = $m.css('opacity');
                $m.mouseover(function() {
                    callBlock({
                        fadeIn: 0,
                        timeout: 30000
                    });

                    var displayBlock = $('.blockMsg');
                    displayBlock.stop(); // cancel fadeout if it has started
                    displayBlock.fadeTo(300, 1); // make it easier to read the message by removing transparency
                }).mouseout(function() {
                    $('.blockMsg').fadeOut(1000);
                });
                // End konapun additions
            };

            // plugin method for blocking element content
            $.fn.block = function(opts) {
                if ( this[0] === window ) {
                    $.blockUI( opts );
                    return this;
                }
                var fullOpts = $.extend({}, $.blockUI.defaults, opts || {});
                this.each(function() {
                    var $el = $(this);
                    if (fullOpts.ignoreIfBlocked && $el.data('blockUI.isBlocked'))
                        return;
                    $el.unblock({ fadeOut: 0 });
                });

                return this.each(function() {
                    if ($.css(this,'position') == 'static') {
                        this.style.position = 'relative';
                        $(this).data('blockUI.static', true);
                    }
                    this.style.zoom = 1; // force 'hasLayout' in ie
                    install(this, opts);
                });
            };

            // plugin method for unblocking element content
            $.fn.unblock = function(opts) {
                if ( this[0] === window ) {
                    $.unblockUI( opts );
                    return this;
                }
                return this.each(function() {
                    remove(this, opts);
                });
            };

            $.blockUI.version = 2.60; // 2nd generation blocking at no extra cost!

            // override these in your code to change the default behavior and style
            $.blockUI.defaults = {
                // message displayed when blocking (use null for no message)
                message:  '<h1>Please wait...</h1>',

                title: null,		// title string; only used when theme == true
                draggable: true,	// only used when theme == true (requires jquery-ui.js to be loaded)

                theme: false, // set to true to use with jQuery UI themes

                // styles for the message when blocking; if you wish to disable
                // these and use an external stylesheet then do this in your code:
                // $.blockUI.defaults.css = {};
                css: {
                    padding:	0,
                    margin:		0,
                    width:		'30%',
                    top:		'40%',
                    left:		'35%',
                    textAlign:	'center',
                    color:		'#000',
                    border:		'3px solid #aaa',
                    backgroundColor:'#fff',
                    cursor:		'wait'
                },

                // minimal style set used when themes are used
                themedCSS: {
                    width:	'30%',
                    top:	'40%',
                    left:	'35%'
                },

                // styles for the overlay
                overlayCSS:  {
                    backgroundColor:	'#000',
                    opacity:			0.6,
                    cursor:				'wait'
                },

                // style to replace wait cursor before unblocking to correct issue
                // of lingering wait cursor
                cursorReset: 'default',

                // styles applied when using $.growlUI
                growlCSS: {
                    width:		'350px',
                    top:		'10px',
                    left:		'',
                    right:		'10px',
                    border:		'none',
                    padding:	'5px',
                    opacity:	0.6,
                    cursor:		'default',
                    color:		'#fff',
                    backgroundColor: '#000',
                    '-webkit-border-radius':'10px',
                    '-moz-border-radius':	'10px',
                    'border-radius':		'10px'
                },

                // IE issues: 'about:blank' fails on HTTPS and javascript:false is s-l-o-w
                // (hat tip to Jorge H. N. de Vasconcelos)
                /*jshint scripturl:true */
                iframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank',

                // force usage of iframe in non-IE browsers (handy for blocking applets)
                forceIframe: false,

                // z-index for the blocking overlay
                baseZ: 1000,

                // set these to true to have the message automatically centered
                centerX: true, // <-- only effects element blocking (page block controlled via css above)
                centerY: true,

                // allow body element to be stetched in ie6; this makes blocking look better
                // on "short" pages.  disable if you wish to prevent changes to the body height
                allowBodyStretch: true,

                // enable if you want key and mouse events to be disabled for content that is blocked
                bindEvents: true,

                // be default blockUI will supress tab navigation from leaving blocking content
                // (if bindEvents is true)
                constrainTabKey: true,

                // fadeIn time in millis; set to 0 to disable fadeIn on block
                fadeIn:  200,

                // fadeOut time in millis; set to 0 to disable fadeOut on unblock
                fadeOut:  400,

                // time in millis to wait before auto-unblocking; set to 0 to disable auto-unblock
                timeout: 0,

                // disable if you don't want to show the overlay
                showOverlay: true,

                // if true, focus will be placed in the first available input field when
                // page blocking
                focusInput: true,

                // elements that can receive focus
                focusableElements: ':input:enabled:visible',

                // suppresses the use of overlay styles on FF/Linux (due to performance issues with opacity)
                // no longer needed in 2012
                // applyPlatformOpacityRules: true,

                // callback method invoked when fadeIn has completed and blocking message is visible
                onBlock: null,

                // callback method invoked when unblocking has completed; the callback is
                // passed the element that has been unblocked (which is the window object for page
                // blocks) and the options that were passed to the unblock call:
                //	onUnblock(element, options)
                onUnblock: null,

                // callback method invoked when the overlay area is clicked.
                // setting this will turn the cursor to a pointer, otherwise cursor defined in overlayCss will be used.
                onOverlayClick: null,

                // don't ask; if you really must know: http://groups.google.com/group/jquery-en/browse_thread/thread/36640a8730503595/2f6a79a77a78e493#2f6a79a77a78e493
                quirksmodeOffsetHack: 4,

                // class name of the message block
                blockMsgClass: 'blockMsg',

                // if it is already blocked, then ignore it (don't unblock and reblock)
                ignoreIfBlocked: false
            };

            // private data and functions follow...

            var pageBlock = null;
            var pageBlockEls = [];

            function install(el, opts) {
                var css, themedCSS;
                var full = (el == window);
                var msg = (opts && opts.message !== undefined ? opts.message : undefined);
                opts = $.extend({}, $.blockUI.defaults, opts || {});

                if (opts.ignoreIfBlocked && $(el).data('blockUI.isBlocked'))
                    return;

                opts.overlayCSS = $.extend({}, $.blockUI.defaults.overlayCSS, opts.overlayCSS || {});
                css = $.extend({}, $.blockUI.defaults.css, opts.css || {});
                if (opts.onOverlayClick)
                    opts.overlayCSS.cursor = 'pointer';

                themedCSS = $.extend({}, $.blockUI.defaults.themedCSS, opts.themedCSS || {});
                msg = msg === undefined ? opts.message : msg;

                // remove the current block (if there is one)
                if (full && pageBlock)
                    remove(window, {fadeOut:0});

                // if an existing element is being used as the blocking content then we capture
                // its current place in the DOM (and current display style) so we can restore
                // it when we unblock
                if (msg && typeof msg != 'string' && (msg.parentNode || msg.jquery)) {
                    var node = msg.jquery ? msg[0] : msg;
                    var data = {};
                    $(el).data('blockUI.history', data);
                    data.el = node;
                    data.parent = node.parentNode;
                    data.display = node.style.display;
                    data.position = node.style.position;
                    if (data.parent)
                        data.parent.removeChild(node);
                }

                $(el).data('blockUI.onUnblock', opts.onUnblock);
                var z = opts.baseZ;

                // blockUI uses 3 layers for blocking, for simplicity they are all used on every platform;
                // layer1 is the iframe layer which is used to supress bleed through of underlying content
                // layer2 is the overlay layer which has opacity and a wait cursor (by default)
                // layer3 is the message content that is displayed while blocking
                var lyr1, lyr2, lyr3, s;
                if (msie || opts.forceIframe)
                    lyr1 = $('<iframe class="blockUI" style="z-index:'+ (z++) +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>');
                else
                    lyr1 = $('<div class="blockUI" style="display:none"></div>');

                if (opts.theme)
                    lyr2 = $('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+ (z++) +';display:none"></div>');
                else
                    lyr2 = $('<div class="blockUI blockOverlay" style="z-index:'+ (z++) +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');

                if (opts.theme && full) {
                    s = '<div class="blockUI ' + opts.blockMsgClass + ' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">';
                    if ( opts.title ) {
                        s += '<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title || '&nbsp;')+'</div>';
                    }
                    s += '<div class="ui-widget-content ui-dialog-content"></div>';
                    s += '</div>';
                }
                else if (opts.theme) {
                    s = '<div class="blockUI ' + opts.blockMsgClass + ' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">';
                    if ( opts.title ) {
                        s += '<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title || '&nbsp;')+'</div>';
                    }
                    s += '<div class="ui-widget-content ui-dialog-content"></div>';
                    s += '</div>';
                }
                else if (full) {
                    s = '<div class="blockUI ' + opts.blockMsgClass + ' blockPage" style="z-index:'+(z+10)+';display:none;position:fixed"></div>';
                }
                else {
                    s = '<div class="blockUI ' + opts.blockMsgClass + ' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>';
                }
                lyr3 = $(s);

                // if we have a message, style it
                if (msg) {
                    if (opts.theme) {
                        lyr3.css(themedCSS);
                        lyr3.addClass('ui-widget-content');
                    }
                    else
                        lyr3.css(css);
                }

                // style the overlay
                if (!opts.theme /*&& (!opts.applyPlatformOpacityRules)*/)
                    lyr2.css(opts.overlayCSS);
                lyr2.css('position', full ? 'fixed' : 'absolute');

                // make iframe layer transparent in IE
                if (msie || opts.forceIframe)
                    lyr1.css('opacity',0.0);

                //$([lyr1[0],lyr2[0],lyr3[0]]).appendTo(full ? 'body' : el);
                var layers = [lyr1,lyr2,lyr3], $par = full ? $('body') : $(el);
                $.each(layers, function() {
                    this.appendTo($par);
                });

                if (opts.theme && opts.draggable && $.fn.draggable) {
                    lyr3.draggable({
                        handle: '.ui-dialog-titlebar',
                        cancel: 'li'
                    });
                }

                // ie7 must use absolute positioning in quirks mode and to account for activex issues (when scrolling)
                var expr = setExpr && (!$.support.boxModel || $('object,embed', full ? null : el).length > 0);
                if (ie6 || expr) {
                    // give body 100% height
                    if (full && opts.allowBodyStretch && $.support.boxModel)
                        $('html,body').css('height','100%');

                    // fix ie6 issue when blocked element has a border width
                    if ((ie6 || !$.support.boxModel) && !full) {
                        var t = sz(el,'borderTopWidth'), l = sz(el,'borderLeftWidth');
                        var fixT = t ? '(0 - '+t+')' : 0;
                        var fixL = l ? '(0 - '+l+')' : 0;
                    }

                    // simulate fixed position
                    $.each(layers, function(i,o) {
                        var s = o[0].style;
                        s.position = 'absolute';
                        if (i < 2) {
                            if (full)
                                s.setExpression('height','Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:'+opts.quirksmodeOffsetHack+') + "px"');
                            else
                                s.setExpression('height','this.parentNode.offsetHeight + "px"');
                            if (full)
                                s.setExpression('width','jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"');
                            else
                                s.setExpression('width','this.parentNode.offsetWidth + "px"');
                            if (fixL) s.setExpression('left', fixL);
                            if (fixT) s.setExpression('top', fixT);
                        }
                        else if (opts.centerY) {
                            if (full) s.setExpression('top','(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');
                            s.marginTop = 0;
                        }
                        else if (!opts.centerY && full) {
                            var top = (opts.css && opts.css.top) ? parseInt(opts.css.top, 10) : 0;
                            var expression = '((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + '+top+') + "px"';
                            s.setExpression('top',expression);
                        }
                    });
                }

                // show the message
                if (msg) {
                    if (opts.theme)
                        lyr3.find('.ui-widget-content').append(msg);
                    else
                        lyr3.append(msg);
                    if (msg.jquery || msg.nodeType)
                        $(msg).show();
                }

                if ((msie || opts.forceIframe) && opts.showOverlay)
                    lyr1.show(); // opacity is zero
                if (opts.fadeIn) {
                    var cb = opts.onBlock ? opts.onBlock : noOp;
                    var cb1 = (opts.showOverlay && !msg) ? cb : noOp;
                    var cb2 = msg ? cb : noOp;
                    if (opts.showOverlay)
                        lyr2._fadeIn(opts.fadeIn, cb1);
                    if (msg)
                        lyr3._fadeIn(opts.fadeIn, cb2);
                }
                else {
                    if (opts.showOverlay)
                        lyr2.show();
                    if (msg)
                        lyr3.show();
                    if (opts.onBlock)
                        opts.onBlock();
                }

                // bind key and mouse events
                bind(1, el, opts);

                if (full) {
                    pageBlock = lyr3[0];
                    pageBlockEls = $(opts.focusableElements,pageBlock);
                    if (opts.focusInput)
                        setTimeout(focus, 20);
                }
                else
                    center(lyr3[0], opts.centerX, opts.centerY);

                if (opts.timeout) {
                    // auto-unblock
                    var to = setTimeout(function() {
                        if (full)
                            $.unblockUI(opts);
                        else
                            $(el).unblock(opts);
                    }, opts.timeout);
                    $(el).data('blockUI.timeout', to);
                }
            }

            // remove the block
            function remove(el, opts) {
                var count;
                var full = (el == window);
                var $el = $(el);
                var data = $el.data('blockUI.history');
                var to = $el.data('blockUI.timeout');
                if (to) {
                    clearTimeout(to);
                    $el.removeData('blockUI.timeout');
                }
                opts = $.extend({}, $.blockUI.defaults, opts || {});
                bind(0, el, opts); // unbind events

                if (opts.onUnblock === null) {
                    opts.onUnblock = $el.data('blockUI.onUnblock');
                    $el.removeData('blockUI.onUnblock');
                }

                var els;
                if (full) // crazy selector to handle odd field errors in ie6/7
                    els = $('body').children().filter('.blockUI').add('body > .blockUI');
                else
                    els = $el.find('>.blockUI');

                // fix cursor issue
                if ( opts.cursorReset ) {
                    if ( els.length > 1 )
                        els[1].style.cursor = opts.cursorReset;
                    if ( els.length > 2 )
                        els[2].style.cursor = opts.cursorReset;
                }

                if (full)
                    pageBlock = pageBlockEls = null;

                if (opts.fadeOut) {
                    count = els.length;
                    els.stop().fadeOut(opts.fadeOut, function() {
                        if ( --count === 0)
                            reset(els,data,opts,el);
                    });
                }
                else
                    reset(els, data, opts, el);
            }

            // move blocking element back into the DOM where it started
            function reset(els,data,opts,el) {
                var $el = $(el);
                if ( $el.data('blockUI.isBlocked') )
                    return;

                els.each(function(i,o) {
                    // remove via DOM calls so we don't lose event handlers
                    if (this.parentNode)
                        this.parentNode.removeChild(this);
                });

                if (data && data.el) {
                    data.el.style.display = data.display;
                    data.el.style.position = data.position;
                    if (data.parent)
                        data.parent.appendChild(data.el);
                    $el.removeData('blockUI.history');
                }

                if ($el.data('blockUI.static')) {
                    $el.css('position', 'static'); // #22
                }

                if (typeof opts.onUnblock == 'function')
                    opts.onUnblock(el,opts);

                // fix issue in Safari 6 where block artifacts remain until reflow
                var body = $(document.body), w = body.width(), cssW = body[0].style.width;
                body.width(w-1).width(w);
                body[0].style.width = cssW;
            }

            // bind/unbind the handler
            function bind(b, el, opts) {
                var full = el == window, $el = $(el);

                // don't bother unbinding if there is nothing to unbind
                if (!b && (full && !pageBlock || !full && !$el.data('blockUI.isBlocked')))
                    return;

                $el.data('blockUI.isBlocked', b);

                // don't bind events when overlay is not in use or if bindEvents is false
                if (!full || !opts.bindEvents || (b && !opts.showOverlay))
                    return;

                // bind anchors and inputs for mouse and key events
                var events = 'mousedown mouseup keydown keypress keyup touchstart touchend touchmove';
                if (b)
                    $(document).bind(events, opts, handler);
                else
                    $(document).unbind(events, handler);

            // former impl...
            //		var $e = $('a,:input');
            //		b ? $e.bind(events, opts, handler) : $e.unbind(events, handler);
            }

            // event handler to suppress keyboard/mouse events when blocking
            function handler(e) {
                // allow tab navigation (conditionally)
                if (e.type === 'keydown' && e.keyCode && e.keyCode == 9) {
                    if (pageBlock && e.data.constrainTabKey) {
                        var els = pageBlockEls;
                        var fwd = !e.shiftKey && e.target === els[els.length-1];
                        var back = e.shiftKey && e.target === els[0];
                        if (fwd || back) {
                            setTimeout(function(){focus(back);},10);
                            return false;
                        }
                    }
                }
                var opts = e.data;
                var target = $(e.target);
                if (target.hasClass('blockOverlay') && opts.onOverlayClick)
                    opts.onOverlayClick();

                // allow events within the message content
                if (target.parents('div.' + opts.blockMsgClass).length > 0)
                    return true;

                // allow events for content that is not being blocked
                return target.parents().children().filter('div.blockUI').length === 0;
            }

            function focus(back) {
                if (!pageBlockEls)
                    return;
                var e = pageBlockEls[back===true ? pageBlockEls.length-1 : 0];
                if (e)
                    e.focus();
            }

            function center(el, x, y) {
                var p = el.parentNode, s = el.style;
                var l = ((p.offsetWidth - el.offsetWidth)/2) - sz(p,'borderLeftWidth');
                var t = ((p.offsetHeight - el.offsetHeight)/2) - sz(p,'borderTopWidth');
                if (x) s.left = l > 0 ? (l+'px') : '0';
                if (y) s.top  = t > 0 ? (t+'px') : '0';
            }

            function sz(el, p) {
                return parseInt($.css(el,p),10)||0;
            }

        }


        /*global define:true */
        if (typeof define === 'function' && define.amd && define.amd.jQuery) {
            define(['jquery'], setup);
        } else {
            setup(jQuery);
        }

    })();

//-------------------------------------------------------
//tablesorter
//-------------------------------------------------------

    (function($){$.extend({tablesorter:new
    function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:true,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:'/\.|\,/g',onRenderHeader:null,selectorHeaders:'thead th',debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);}else{alert(s);}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";}if(table.tBodies.length==0)return;var rows=table.tBodies[0].rows;if(rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);}else if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);}if(!p){p=detectParserForColumn(table,rows,-1,i);}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";}list.push(p);}}if(table.config.debug){log(parsersDebug);}return list;};function detectParserForColumn(table,rows,rowIndex,cellIndex){var l=parsers.length,node=false,nodeValue=false,keepLooking=true;while(nodeValue==''&&keepLooking){rowIndex++;if(rows[rowIndex]){node=getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex);nodeValue=trimAndGetNodeText(table.config,node);if(table.config.debug){log('Checking if value was empty on row:'+rowIndex);}}else{keepLooking=false;}}for(var i=1;i<l;i++){if(parsers[i].is(nodeValue,table,node)){return parsers[i];}}return parsers[0];}function getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex){return rows[rowIndex].cells[cellIndex];}function trimAndGetNodeText(config,node){return $.trim(getElementText(config,node));}function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];}}return false;}function buildCache(table){if(table.config.debug){var cacheTime=new Date();}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=$(table.tBodies[0].rows[i]),cols=[];if(c.hasClass(table.config.cssChildRow)){cache.row[cache.row.length-1]=cache.row[cache.row.length-1].add(c);continue;}cache.row.push(c);for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c[0].cells[j]),table,c[0].cells[j]));}cols.push(cache.normalized.length);cache.normalized.push(cols);cols=null;};if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);}return cache;};function getElementText(config,node){var text="";if(!node)return"";if(!config.supportsTextContent)config.supportsTextContent=node.textContent||false;if(config.textExtraction=="simple"){if(config.supportsTextContent){text=node.textContent;}else{if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){text=node.childNodes[0].innerHTML;}else{text=node.innerHTML;}}}else{if(typeof(config.textExtraction)=="function"){text=config.textExtraction(node);}else{text=$(node).text();}}return text;}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){var pos=n[i][checkCell];rows.push(r[pos]);if(!table.config.appender){var l=r[pos].length;for(var j=0;j<l;j++){tableBody[0].appendChild(r[pos][j]);}}}if(table.config.appender){table.config.appender(table,rows);}rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime);}applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd");},0);};function buildHeaders(table){if(table.config.debug){var time=new Date();}var meta=($.metadata)?true:false;var header_index=computeTableHeaderCellIndexes(table);$tableHeaders=$(table.config.selectorHeaders,table).each(function(index){this.column=header_index[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=formatSortingOrder(table.config.sortInitialOrder);this.count=this.order;if(checkHeaderMetadata(this)||checkHeaderOptions(table,index))this.sortDisabled=true;if(checkHeaderOptionsSortingLocked(table,index))this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(table,index);if(!this.sortDisabled){var $th=$(this).addClass(table.config.cssHeader);if(table.config.onRenderHeader)table.config.onRenderHeader.apply($th);}table.config.headerList[index]=this;});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders);}return $tableHeaders;};function computeTableHeaderCellIndexes(t){var matrix=[];var lookup={};var thead=t.getElementsByTagName('THEAD')[0];var trs=thead.getElementsByTagName('TR');for(var i=0;i<trs.length;i++){var cells=trs[i].cells;for(var j=0;j<cells.length;j++){var c=cells[j];var rowIndex=c.parentNode.rowIndex;var cellId=rowIndex+"-"+c.cellIndex;var rowSpan=c.rowSpan||1;var colSpan=c.colSpan||1
    var firstAvailCol;if(typeof(matrix[rowIndex])=="undefined"){matrix[rowIndex]=[];}for(var k=0;k<matrix[rowIndex].length+1;k++){if(typeof(matrix[rowIndex][k])=="undefined"){firstAvailCol=k;break;}}lookup[cellId]=firstAvailCol;for(var k=rowIndex;k<rowIndex+rowSpan;k++){if(typeof(matrix[k])=="undefined"){matrix[k]=[];}var matrixrow=matrix[k];for(var l=firstAvailCol;l<firstAvailCol+colSpan;l++){matrixrow[l]="x";}}}}return lookup;}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);}}}return arr;};function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;};return false;}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;};return false;}function checkHeaderOptionsSortingLocked(table,i){if((table.config.headers[i])&&(table.config.headers[i].lockedOrder))return table.config.headers[i].lockedOrder;return false;}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table);}}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];}}};function formatSortingOrder(v){if(typeof(v)!="Number"){return(v.toLowerCase()=="desc")?1:0;}else{return(v==1)?1:0;}}function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true;}}return false;}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]]);}}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$('<colgroup>');$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($('<col>').css('width',$(this).width()));});$(table).prepend(colgroup);};}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++;}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(table.config.parsers[c].type=="text")?((order==0)?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c)):((order==0)?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c));var e="e"+i;dynamicExp+="var "+e+" = "+s;dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { ";}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; ";}dynamicExp+="return 0; ";dynamicExp+="}; ";if(table.config.debug){benchmark("Evaling expression:"+dynamicExp,new Date());}eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);}return cache;};function makeSortFunction(type,direction,index){var a="a["+index+"]",b="b["+index+"]";if(type=='text'&&direction=='asc'){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+a+" < "+b+") ? -1 : 1 )));";}else if(type=='text'&&direction=='desc'){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+b+" < "+a+") ? -1 : 1 )));";}else if(type=='numeric'&&direction=='asc'){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+a+" - "+b+"));";}else if(type=='numeric'&&direction=='desc'){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+b+" - "+a+"));";}};function makeSortText(i){return"((a["+i+"] < b["+i+"]) ? -1 : ((a["+i+"] > b["+i+"]) ? 1 : 0));";};function makeSortTextDesc(i){return"((b["+i+"] < a["+i+"]) ? -1 : ((b["+i+"] > a["+i+"]) ? 1 : 0));";};function makeSortNumeric(i){return"a["+i+"]-b["+i+"];";};function makeSortNumericDesc(i){return"b["+i+"]-a["+i+"];";};function sortText(a,b){if(table.config.sortLocaleCompare)return a.localeCompare(b);return((a<b)?-1:((a>b)?1:0));};function sortTextDesc(a,b){if(table.config.sortLocaleCompare)return b.localeCompare(a);return((b<a)?-1:((b>a)?1:0));};function sortNumeric(a,b){return a-b;};function sortNumericDesc(a,b){return b-a;};function getCachedSortType(parsers,i){return parsers[i].type;};this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies)return;var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$.data(this,"tablesorter",config);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){$this.trigger("sortStart");var $cell=$(this);var i=this.column;this.order=this.count++%2;if(this.lockedOrder)this.order=this.lockedOrder;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j]);}}}config.sortList.push([i,this.order]);}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2;}}}else{config.sortList.push([i,this.order]);}};setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache));},1);return false;}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false;}});$this.bind("update",function(){var me=this;setTimeout(function(){me.config.parsers=buildParserCache(me,$headers);cache=buildCache(me);},1);}).bind("updateCell",function(e,cell){var config=this.config;var pos=[(cell.parentNode.rowIndex-1),cell.cellIndex];cache.normalized[pos[0]][pos[1]]=config.parsers[pos[1]].format(getElementText(config,cell),cell);}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache));}).bind("appendCache",function(){appendToTable(this,cache);}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);}).bind("applyWidgets",function(){applyWidget(this);});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);}applyWidget(this);});};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;}}if(a){parsers.push(parser);};};this.addWidget=function(widget){widgets.push(widget);};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i;};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i;};this.isDigit=function(s,config){return/^[-+]?\d*$/.test($.trim(s.replace(/[,.']/g,'')));};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild)this.removeChild(this.firstChild);}empty.apply(table.tBodies[0]);}else{table.tBodies[0].innerHTML="";}};}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true;},format:function(s){return $.trim(s.toLocaleLowerCase());},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c);},format:function(s){return $.tablesorter.formatFloat(s);},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[£$€?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[£$€]/g),""));},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item;}else{r+=item;}}return $.tablesorter.formatFloat(r);},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),''));},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");}else if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");}else if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");}return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();}var $tr,row=-1,odd;$("tr:visible",table.tBodies[0]).each(function(i){$tr=$(this);if(!$tr.hasClass(table.config.cssChildRow))row++;odd=(row%2==0);$tr.removeClass(table.config.widgetZebra.css[odd?0:1]).addClass(table.config.widgetZebra.css[odd?1:0])});if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);}}});})(jQuery);

//-------------------------------------------------------
//bubble_popup
//-------------------------------------------------------

    /*

        jQuery Bubble Popup v.3.0
        http://www.maxvergelli.com/jquery-bubble-popup/
        
        Copyright (c) 2012 Max Vergelli
        
        Permission is hereby granted, free of charge, to any person obtaining a copy
        of this software and associated documentation files (the "Software"), to deal
        in the Software without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        copies of the Software, and to permit persons to whom the Software is
        furnished to do so, subject to the following conditions:
        
        The above copyright notice and this permission notice shall be included in
        all copies or substantial portions of the Software.
        
        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
        THE SOFTWARE.

    */
    eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(6(a){a.1i.3t=6(){4 c=X;a(W).1e(6(d,e){4 b=a(e).1I("1R");5(b!=X&&7 b=="1a"&&!a.18(b)&&!a.19(b)&&b.3!=X&&7 b.3=="1a"&&!a.18(b.3)&&!a.19(b.3)&&7 b.3.1t!="1u"){c=b.3.1t?U:Q}12 Q});12 c};a.1i.3u=6(){4 b=X;a(W).1e(6(e,f){4 d=a(f).1I("1R");5(d!=X&&7 d=="1a"&&!a.18(d)&&!a.19(d)&&d.3!=X&&7 d.3=="1a"&&!a.18(d.3)&&!a.19(d.3)&&7 d.3.1S!="1u"&&d.3.1S!=X){b=c(d.3.1S)}12 Q});6 c(d){12 2s 2J(d*2K)}12 b};a.1i.3v=6(){4 b=X;a(W).1e(6(e,f){4 d=a(f).1I("1R");5(d!=X&&7 d=="1a"&&!a.18(d)&&!a.19(d)&&d.3!=X&&7 d.3=="1a"&&!a.18(d.3)&&!a.19(d.3)&&7 d.3.1V!="1u"&&d.3.1V!=X){b=c(d.3.1V)}12 Q});6 c(d){12 2s 2J(d*2K)}12 b};a.1i.3w=6(){4 b=X;a(W).1e(6(e,f){4 d=a(f).1I("1R");5(d!=X&&7 d=="1a"&&!a.18(d)&&!a.19(d)&&d.3!=X&&7 d.3=="1a"&&!a.18(d.3)&&!a.19(d.3)&&7 d.3.1J!="1u"&&d.3.1J!=X){b=c(d.3.1J)}12 Q});6 c(d){12 2s 2J(d*2K)}12 b};a.1i.3x=6(){4 b=X;a(W).1e(6(d,e){4 c=a(e).1I("1R");5(c!=X&&7 c=="1a"&&!a.18(c)&&!a.19(c)&&c.3!=X&&7 c.3=="1a"&&!a.18(c.3)&&!a.19(c.3)&&7 c.3.S!="1u"){b=a("#"+c.3.S).Z>0?a("#"+c.3.S).2k():X}12 Q});12 b};a.1i.3y=6(){4 b=X;a(W).1e(6(d,e){4 c=a(e).1I("1R");5(c!=X&&7 c=="1a"&&!a.18(c)&&!a.19(c)&&c.3!=X&&7 c.3=="1a"&&!a.18(c.3)&&!a.19(c.3)&&7 c.3.S!="1u"){b=c.3.S}12 Q});12 b};a.1i.3z=6(){4 b=0;a(W).1e(6(d,e){4 c=a(e).1I("1R");5(c!=X&&7 c=="1a"&&!a.18(c)&&!a.19(c)&&c.3!=X&&7 c.3=="1a"&&!a.18(c.3)&&!a.19(c.3)&&7 c.3.S!="1u"){a(e).2d("2S");a(e).2d("2T");a(e).2d("2U");a(e).2d("2A");a(e).2d("2L");a(e).2d("2t");a(e).2d("2u");a(e).2d("22");a(e).1I("1R",{});5(a("#"+c.3.S).Z>0){a("#"+c.3.S).2B()}b++}});12 b};a.1i.3A=6(){4 c=Q;a(W).1e(6(d,e){4 b=a(e).1I("1R");5(b!=X&&7 b=="1a"&&!a.18(b)&&!a.19(b)&&b.3!=X&&7 b.3=="1a"&&!a.18(b.3)&&!a.19(b.3)&&7 b.3.S!="1u"){c=U}12 Q});12 c};a.1i.3B=6(){4 b={};a(W).1e(6(c,d){b=a(d).1I("1R");5(b!=X&&7 b=="1a"&&!a.18(b)&&!a.19(b)&&b.3!=X&&7 b.3=="1a"&&!a.18(b.3)&&!a.19(b.3)){3C b.3}1c{b=X}12 Q});5(a.19(b)){b=X}12 b};a.1i.3D=6(b,c){a(W).1e(6(d,e){5(7 c!="1K"){c=U}a(e).1f("2T",[b,c])})};a.1i.3E=6(b){a(W).1e(6(c,d){a(d).1f("2U",[b])})};a.1i.3F=6(b,c){a(W).1e(6(d,e){a(e).1f("2u",[b,c,U]);12 Q})};a.1i.3G=6(b,c){a(W).1e(6(d,e){a(e).1f("2u",[b,c,U])})};a.1i.3H=6(){a(W).1e(6(b,c){a(c).1f("22",[U]);12 Q})};a.1i.3I=6(){a(W).1e(6(b,c){a(c).1f("22",[U])})};a.1i.3J=6(){a(W).1e(6(b,c){a(c).1f("2L");12 Q})};a.1i.3K=6(){a(W).1e(6(b,c){a(c).1f("2L")})};a.1i.3L=6(){a(W).1e(6(b,c){a(c).1f("2t");12 Q})};a.1i.3M=6(){a(W).1e(6(b,c){a(c).1f("2t")})};a.1i.3N=6(e){4 r={2M:W,3O:[],2V:"1R",3a:["T","13","1b"],3b:["R","13","1d"],3c:\'<3d 1v="{1L} {3e}"{2W} S="{2X}"> 									<2Y{2Z}> 									<3f> 									<2v> 										<14 1v="{1L}-T-R"{2l-30}>{2l-2N}</14> 										<14 1v="{1L}-T-13"{2l-3g}>{2l-1W}</14> 										<14 1v="{1L}-T-1d"{2l-31}>{2l-2O}</14> 									</2v> 									<2v> 										<14 1v="{1L}-13-R"{1W-30}>{1W-2N}</14> 										<14 1v="{1L}-1G"{32}>{33}</14> 										<14 1v="{1L}-13-1d"{1W-31}>{1W-2O}</14> 									</2v> 									<2v> 										<14 1v="{1L}-1b-R"{2m-30}>{2m-2N}</14> 										<14 1v="{1L}-1b-13"{2m-3g}>{2m-1W}</14> 										<14 1v="{1L}-1b-1d"{2m-31}>{2m-2O}</14> 									</2v> 									</3f> 									</2Y> 									</3d>\',3:{S:X,1J:X,1V:X,1S:X,1t:Q,1M:Q,1o:Q,1z:Q,1X:Q,1A:Q,23:{}},15:"T",3h:["R","T","1d","1b"],11:"24",34:["R","24","1d","T","13","1b"],2P:["R","24","1d"],35:["T","13","1b"],1n:"3P",1p:X,1q:X,1w:{},1x:{},1G:X,1N:{},V:{11:"24",1C:Q},1j:U,2n:U,25:Q,2o:U,26:"2C",3i:["2C","36"],27:"36",3j:["2C","36"],1O:3k,1P:3k,28:0,29:0,Y:"3l",1Y:"3Q",2a:"3l-3R/",1h:{2D:"3S",1D:"3T"},1T:6(){},1U:6(){},1m:[]};h(e);6 g(v){4 w={3:{},1p:r.1p,1q:r.1q,1w:r.1w,1x:r.1x,15:r.15,11:r.11,1n:r.1n,1O:r.1O,1P:r.1P,28:r.28,29:r.29,26:r.26,27:r.27,V:r.V,1G:r.1G,1N:r.1N,Y:r.Y,1Y:r.1Y,2a:r.2a,1h:r.1h,1j:r.1j,2o:r.2o,2n:r.2n,25:r.25,1T:r.1T,1U:r.1U,1m:r.1m};4 t=a.3U(Q,w,(7 v=="1a"&&!a.18(v)&&!a.19(v)&&v!=X?v:{}));t.3.S=r.3.S;t.3.1J=r.3.1J;t.3.1V=r.3.1V;t.3.1S=r.3.1S;t.3.1t=r.3.1t;t.3.1M=r.3.1M;t.3.1o=r.3.1o;t.3.1z=r.3.1z;t.3.1X=r.3.1X;t.3.1A=r.3.1A;t.3.23=r.3.23;t.1p=(7 t.1p=="1Q"||7 t.1p=="2b")&&10(t.1p)>0?10(t.1p):r.1p;t.1q=(7 t.1q=="1Q"||7 t.1q=="2b")&&10(t.1q)>0?10(t.1q):r.1q;t.1w=t.1w!=X&&7 t.1w=="1a"&&!a.18(t.1w)&&!a.19(t.1w)?t.1w:r.1w;t.1x=t.1x!=X&&7 t.1x=="1a"&&!a.18(t.1x)&&!a.19(t.1x)?t.1x:r.1x;t.15=7 t.15=="1Q"&&o(t.15.1Z(),r.3h)?t.15.1Z():r.15;t.11=7 t.11=="1Q"&&o(t.11.1Z(),r.34)?t.11.1Z():r.11;t.1n=(7 t.1n=="1Q"||7 t.1n=="2b")&&10(t.1n)>=0?10(t.1n):r.1n;t.1O=7 t.1O=="2b"&&10(t.1O)>0?10(t.1O):r.1O;t.1P=7 t.1P=="2b"&&10(t.1P)>0?10(t.1P):r.1P;t.28=7 t.28=="2b"&&t.28>=0?t.28:r.28;t.29=7 t.29=="2b"&&t.29>=0?t.29:r.29;t.26=7 t.26=="1Q"&&o(t.26.1Z(),r.3i)?t.26.1Z():r.26;t.27=7 t.27=="1Q"&&o(t.27.1Z(),r.3j)?t.27.1Z():r.27;t.V=t.V!=X&&7 t.V=="1a"&&!a.18(t.V)&&!a.19(t.V)?t.V:r.V;t.V.11=7 t.V.11!="1u"?t.V.11:r.V.11;t.V.1C=7 t.V.1C!="1u"?t.V.1C:r.V.1C;t.1G=7 t.1G=="1Q"&&t.1G.Z>0?t.1G:r.1G;t.1N=t.1N!=X&&7 t.1N=="1a"&&!a.18(t.1N)&&!a.19(t.1N)?t.1N:r.1N;t.Y=j(7 t.Y=="1Q"&&t.Y.Z>0?t.Y:r.Y);t.1Y=7 t.1Y=="1Q"&&t.1Y.Z>0?a.3m(t.1Y):r.1Y;t.2a=7 t.2a=="1Q"&&t.2a.Z>0?a.3m(t.2a):r.2a;t.1h=t.1h!=X&&7 t.1h=="1a"&&!a.18(t.1h)&&!a.19(t.1h)&&(7 10(t.1h.2D)=="2b"&&7 10(t.1h.1D)=="2b")?t.1h:r.1h;t.1j=7 t.1j=="1K"&&t.1j==U?U:Q;t.2o=7 t.2o=="1K"&&t.2o==U?U:Q;t.2n=7 t.2n=="1K"&&t.2n==U?U:Q;t.25=7 t.25=="1K"&&t.25==U?U:Q;t.1T=7 t.1T=="6"?t.1T:r.1T;t.1U=7 t.1U=="6"?t.1U:r.1U;t.1m=a.18(t.1m)?t.1m:r.1m;5(t.15=="R"||t.15=="1d"){t.11=o(t.11,r.35)?t.11:"13"}1c{t.11=o(t.11,r.2P)?t.11:"24"}20(4 u 2p t.V){2e(u){17"11":t.V.11=7 t.V.11=="1Q"&&o(t.V.11.1Z(),r.34)?t.V.11.1Z():r.V.11;5(t.15=="R"||t.15=="1d"){t.V.11=o(t.V.11,r.35)?t.V.11:"13"}1c{t.V.11=o(t.V.11,r.2P)?t.V.11:"24"}16;17"1C":t.V.1C=t.V.1C==U?U:Q;16}}12 t}6 l(t){5(t==0){12 0}5(t>0){12-(1r.1y(t))}1c{12 1r.1y(t)}}6 o(v,w){4 t=Q;20(4 u 2p w){5(w[u]==v){t=U;16}}12 t}6 k(t){a(t).1e(6(){a("<1H/>")[0].2q=W})}6 b(t){5(t.1m&&t.1m.Z>0){20(4 u=0;u<t.1m.Z;u++){4 v=(t.1m[u].3n(0)!="#"?"#"+t.1m[u]:t.1m[u]);a(v).1k({37:"1C"})}}}6 s(u){5(u.1m&&u.1m.Z>0){20(4 v=0;v<u.1m.Z;v++){4 x=(u.1m[v].3n(0)!="#"?"#"+u.1m[v]:u.1m[v]);a(x).1k({37:"3o"});4 w=a(x).Z;20(4 t=0;t<w.Z;t++){a(w[t]).1k({37:"3o"})}}}}6 m(u){4 w=u.2a;4 t=u.1Y;4 v=(w.2E(w.Z-1)=="/"||w.2E(w.Z-1)=="\\\\")?w.2E(0,w.Z-1)+"/"+t+"/":w+"/"+t+"/";12 v+(u.1j==U?(a.1l.1E?"2f/":""):"2f/")}6 j(t){4 u=t.2E(0,1)=="."?t.2E(1,t.Z):t;12 u}6 q(u){5(a("#"+u.3.S).Z>0){4 t="1b-13";2e(u.15){17"R":t="13-1d";16;17"T":t="1b-13";16;17"1d":t="13-R";16;17"1b":t="T-13";16}5(o(u.V.11,r.2P)){a("#"+u.3.S).1g("14."+u.Y+"-"+t).1k("38-11",u.V.11)}1c{a("#"+u.3.S).1g("14."+u.Y+"-"+t).1k("39-11",u.V.11)}}}6 p(v){4 H=r.3c;4 F=m(v);4 x="";4 G="";4 u="";5(!v.V.1C){2e(v.15){17"R":G="1d";u="{1W-2O}";16;17"T":G="1b";u="{2m-1W}";16;17"1d":G="R";u="{1W-2N}";16;17"1b":G="T";u="{2l-1W}";16}x=\'<1H 2q="\'+F+"V-"+G+"."+(v.1j==U?(a.1l.1E?"1F":"2r"):"1F")+\'" 2w="" 1v="\'+v.Y+\'-V" />\'}4 t=r.3a;4 z=r.3b;4 K,E,A,J;4 B="";4 y="";4 D=2s 3p();20(E 2p t){A="";J="";20(K 2p z){A=t[E]+"-"+z[K];A=A.3V();J="{"+A+"3W}";A="{"+A+"}";5(A==u){H=H.1B(A,x);B=""}1c{H=H.1B(A,"");B=""}5(t[E]+"-"+z[K]!="13-13"){y=F+t[E]+"-"+z[K]+"."+(v.1j==U?(a.1l.1E?"1F":"2r"):"1F");D.3X(y);H=H.1B(J,\' 2Q="\'+B+"3Y-3Z:40("+y+\');"\')}}}5(D.Z>0){k(D)}4 w="";5(v.1x!=X&&7 v.1x=="1a"&&!a.18(v.1x)&&!a.19(v.1x)){20(4 C 2p v.1x){w+=C+":"+v.1x[C]+";"}}w+=(v.1p!=X||v.1q!=X)?(v.1p!=X?"1p:"+v.1p+"21;":"")+(v.1q!=X?"1q:"+v.1q+"21;":""):"";H=w.Z>0?H.1B("{2Z}",\' 2Q="\'+w+\'"\'):H.1B("{2Z}","");4 I="";5(v.1w!=X&&7 v.1w=="1a"&&!a.18(v.1w)&&!a.19(v.1w)){20(4 C 2p v.1w){I+=C+":"+v.1w[C]+";"}}H=I.Z>0?H.1B("{2W}",\' 2Q="\'+I+\'"\'):H.1B("{2W}","");H=H.1B("{3e}",v.Y+"-"+v.1Y);H=v.3.S!=X?H.1B("{2X}",v.3.S):H.1B("{2X}","");41(H.42("{1L}")>-1){H=H.1B("{1L}",v.Y)}H=v.1G!=X?H.1B("{33}",v.1G):H.1B("{33}","");J="";20(4 C 2p v.1N){J+=C+":"+v.1N[C]+";"}H=J.Z>0?H.1B("{32}",\' 2Q="\'+J+\'"\'):H.1B("{32}","");12 H}6 f(){12 1r.43(2s 2J().44()/2K)}6 c(E,N,x){4 O=x.15;4 K=x.11;4 z=x.1n;4 F=x.1h;4 I=2s 3p();4 u=N.2F();4 t=10(u.T);4 y=10(u.R);4 P=10(N.2x(Q));4 L=10(N.2y(Q));4 v=10(E.2x(Q));4 M=10(E.2y(Q));F.1D=1r.1y(10(F.1D));F.2D=1r.1y(10(F.2D));4 w=l(F.1D);4 J=l(F.1D);4 A=l(F.2D);4 H=m(x);2e(K){17"R":I.T=O=="T"?t-M-z+l(w):t+L+z+w;I.R=y+A;16;17"24":4 D=1r.1y(v-P)/2;I.T=O=="T"?t-M-z+l(w):t+L+z+w;I.R=v>=P?y-D:y+D;16;17"1d":4 D=1r.1y(v-P);I.T=O=="T"?t-M-z+l(w):t+L+z+w;I.R=v>=P?y-D+l(A):y+D+l(A);16;17"T":I.T=t+A;I.R=O=="R"?y-v-z+l(J):y+P+z+J;16;17"13":4 D=1r.1y(M-L)/2;I.T=M>=L?t-D:t+D;I.R=O=="R"?y-v-z+l(J):y+P+z+J;16;17"1b":4 D=1r.1y(M-L);I.T=M>=L?t-D+l(A):t+D+l(A);I.R=O=="R"?y-v-z+l(J):y+P+z+J;16}I.15=O;5(a("#"+x.3.S).Z>0&&a("#"+x.3.S).1g("1H."+x.Y+"-V").Z>0){a("#"+x.3.S).1g("1H."+x.Y+"-V").2B();4 G="1b";4 C="1b-13";2e(O){17"R":G="1d";C="13-1d";16;17"T":G="1b";C="1b-13";16;17"1d":G="R";C="13-R";16;17"1b":G="T";C="T-13";16}a("#"+x.3.S).1g("14."+x.Y+"-"+C).2G();a("#"+x.3.S).1g("14."+x.Y+"-"+C).2k(\'<1H 2q="\'+H+"V-"+G+"."+(x.1j==U?(a.1l.1E?"1F":"2r"):"1F")+\'" 2w="" 1v="\'+x.Y+\'-V" />\');q(x)}5(x.2n==U){5(I.T<a(1s).2g()||I.T+M>a(1s).2g()+a(1s).1q()){5(a("#"+x.3.S).Z>0&&a("#"+x.3.S).1g("1H."+x.Y+"-V").Z>0){a("#"+x.3.S).1g("1H."+x.Y+"-V").2B()}4 B="";5(I.T<a(1s).2g()){I.15="1b";I.T=t+L+z+w;5(a("#"+x.3.S).Z>0&&!x.V.1C){a("#"+x.3.S).1g("14."+x.Y+"-T-13").2G();a("#"+x.3.S).1g("14."+x.Y+"-T-13").2k(\'<1H 2q="\'+H+"V-T."+(x.1j==U?(a.1l.1E?"1F":"2r"):"1F")+\'" 2w="" 1v="\'+x.Y+\'-V" />\');B="T-13"}}1c{5(I.T+M>a(1s).2g()+a(1s).1q()){I.15="T";I.T=t-M-z+l(w);5(a("#"+x.3.S).Z>0&&!x.V.1C){a("#"+x.3.S).1g("14."+x.Y+"-1b-13").2G();a("#"+x.3.S).1g("14."+x.Y+"-1b-13").2k(\'<1H 2q="\'+H+"V-1b."+(x.1j==U?(a.1l.1E?"1F":"2r"):"1F")+\'" 2w="" 1v="\'+x.Y+\'-V" />\');B="1b-13"}}}5(I.R<0){I.R=0;5(B.Z>0){a("#"+x.3.S).1g("14."+x.Y+"-"+B).1k("38-11","24")}}1c{5(I.R+v>a(1s).1p()){I.R=a(1s).1p()-v;5(B.Z>0){a("#"+x.3.S).1g("14."+x.Y+"-"+B).1k("38-11","24")}}}}1c{5(I.R<0||I.R+v>a(1s).1p()){5(a("#"+x.3.S).Z>0&&a("#"+x.3.S).1g("1H."+x.Y+"-V").Z>0){a("#"+x.3.S).1g("1H."+x.Y+"-V").2B()}4 B="";5(I.R<0){I.15="1d";I.R=y+P+z+J;5(a("#"+x.3.S).Z>0&&!x.V.1C){a("#"+x.3.S).1g("14."+x.Y+"-13-R").2G();a("#"+x.3.S).1g("14."+x.Y+"-13-R").2k(\'<1H 2q="\'+H+"V-R."+(x.1j==U?(a.1l.1E?"1F":"2r"):"1F")+\'" 2w="" 1v="\'+x.Y+\'-V" />\');B="13-R"}}1c{5(I.R+v>a(1s).1p()){I.15="R";I.R=y-v-z+l(J);5(a("#"+x.3.S).Z>0&&!x.V.1C){a("#"+x.3.S).1g("14."+x.Y+"-13-1d").2G();a("#"+x.3.S).1g("14."+x.Y+"-13-1d").2k(\'<1H 2q="\'+H+"V-1d."+(x.1j==U?(a.1l.1E?"1F":"2r"):"1F")+\'" 2w="" 1v="\'+x.Y+\'-V" />\');B="13-1d"}}}5(I.T<a(1s).2g()){I.T=a(1s).2g();5(B.Z>0){a("#"+x.3.S).1g("14."+x.Y+"-"+B).1k("39-11","13")}}1c{5(I.T+M>a(1s).2g()+a(1s).1q()){I.T=(a(1s).2g()+a(1s).1q())-M;5(B.Z>0){a("#"+x.3.S).1g("14."+x.Y+"-"+B).1k("39-11","13")}}}}}}12 I}6 d(u,t){a(u).1I(r.2V,t)}6 n(t){12 a(t).1I(r.2V)}6 i(t){4 u=t!=X&&7 t=="1a"&&!a.18(t)&&!a.19(t)?U:Q;12 u}6 h(t){a(1s).45(6(){a(r.2M).1e(6(u,v){a(v).1f("2A")})});a(46).47(6(u){a(r.2M).1e(6(v,w){a(w).1f("2S",[u.48,u.49])})});a(r.2M).1e(6(v,w){4 u=g(t);u.3.1J=f();u.3.S=u.Y+"-"+u.3.1J+"-"+v;d(w,u);a(w).2h("2S",6(y,C,B){4 N=n(W);5(i(N)&&i(N.3)&&7 C!="1u"&&7 B!="1u"){5(N.2o){4 E=a(W);4 z=E.2F();4 L=10(z.T);4 H=10(z.R);4 F=10(E.2x(Q));4 K=10(E.2y(Q));4 J=Q;5(H<=C&&C<=F+H&&L<=B&&B<=K+L){J=U}1c{J=Q}5(J&&!N.3.1X){N.3.1X=U;d(W,N);5(N.26=="2C"){a(W).1f("2u")}1c{5(N.25&&a("#"+N.3.S).Z>0){4 x=a("#"+N.3.S);4 A=x.2F();4 D=10(A.T);4 I=10(A.R);4 G=10(x.2x(Q));4 M=10(x.2y(Q));5(I<=C&&C<=G+I&&D<=B&&B<=M+D){}1c{a(W).1f("22")}}1c{a(W).1f("22")}}}1c{5(!J&&N.3.1X){N.3.1X=Q;d(W,N);5(N.27=="2C"){a(W).1f("2u")}1c{5(N.25&&a("#"+N.3.S).Z>0){4 x=a("#"+N.3.S);4 A=x.2F();4 D=10(A.T);4 I=10(A.R);4 G=10(x.2x(Q));4 M=10(x.2y(Q));5(I<=C&&C<=G+I&&D<=B&&B<=M+D){}1c{a(W).1f("22")}}1c{a(W).1f("22")}}}1c{5(!J&&!N.3.1X){5(N.25&&a("#"+N.3.S).Z>0&&!N.3.1o){4 x=a("#"+N.3.S);4 A=x.2F();4 D=10(A.T);4 I=10(A.R);4 G=10(x.2x(Q));4 M=10(x.2y(Q));5(I<=C&&C<=G+I&&D<=B&&B<=M+D){}1c{a(W).1f("22")}}}}}}}});a(w).2h("2T",6(A,x,z){4 y=n(W);5(i(y)&&i(y.3)&&7 x!="1u"){y.3.1V=f();5(7 z=="1K"&&z==U){y.1G=x}d(W,y);5(a("#"+y.3.S).Z>0){a("#"+y.3.S).1g("14."+y.Y+"-1G").2k(x);5(y.3.1z){a(W).1f("2A",[Q])}1c{a(W).1f("2A",[U])}}}});a(w).2h("2U",6(A,z){4 x=n(W);5(i(x)&&i(x.3)){4 y=x;x=g(z);x.3.S=y.3.S;x.3.1J=y.3.1J;x.3.1V=f();x.3.1S=y.3.1S;x.3.1t=y.3.1t;x.3.1M=y.3.1M;x.3.23={};d(W,x)}});a(w).2h("2A",6(A,y){4 z=n(W);5(i(z)&&i(z.3)&&a("#"+z.3.S).Z>0&&z.3.1t==U){4 x=a("#"+z.3.S);4 C=c(x,a(W),z);4 B=2;5(7 y=="1K"&&y==U){x.1k({T:C.T,R:C.R})}1c{2e(z.15){17"R":x.1k({T:C.T,R:(C.15!=z.15?C.R-(1r.1y(z.1h.1D)*B):C.R+(1r.1y(z.1h.1D)*B))});16;17"T":x.1k({T:(C.15!=z.15?C.T-(1r.1y(z.1h.1D)*B):C.T+(1r.1y(z.1h.1D)*B)),R:C.R});16;17"1d":x.1k({T:C.T,R:(C.15!=z.15?C.R+(1r.1y(z.1h.1D)*B):C.R-(1r.1y(z.1h.1D)*B))});16;17"1b":x.1k({T:(C.15!=z.15?C.T+(1r.1y(z.1h.1D)*B):C.T-(1r.1y(z.1h.1D)*B)),R:C.R});16}}}});a(w).2h("2L",6(){4 x=n(W);5(i(x)&&i(x.3)){x.3.1M=U;d(W,x)}});a(w).2h("2t",6(){4 x=n(W);5(i(x)&&i(x.3)){x.3.1M=Q;d(W,x)}});a(w).2h("2u",6(x,A,D,G){4 H=n(W);5((7 G=="1K"&&G==U&&(i(H)&&i(H.3)))||(7 G=="1u"&&(i(H)&&i(H.3)&&!H.3.1M&&!H.3.1t))){5(7 G=="1K"&&G==U){a(W).1f("2t")}H.3.1t=U;H.3.1M=Q;H.3.1o=Q;H.3.1z=Q;5(i(H.3.23)){H=H.3.23}1c{H.3.23={}}5(i(A)){4 C=H;4 F=f();H=g(A);H.3.S=C.3.S;H.3.1J=C.3.1J;H.3.1V=F;H.3.1S=F;H.3.1t=U;H.3.1M=Q;H.3.1o=Q;H.3.1z=Q;H.3.1X=C.3.1X;H.3.1A=C.3.1A;H.3.23={};5(7 D=="1K"&&D==Q){C.3.1V=F;C.3.1S=F;H.3.23=C}}d(W,H);b(H);5(a("#"+H.3.S).Z>0){a("#"+H.3.S).2B()}4 y={};4 B=p(H);y=a(B);y.4a("4b");y=a("#"+H.3.S);y.1k({2c:0,T:"3q",R:"3q",15:"4c",2H:"4d"});5(H.1j==U){5(a.1l.1E&&10(a.1l.2z)<9){a("#"+H.3.S+" 2Y").2I(H.Y+"-2f")}}q(H);4 E=c(y,a(W),H);y.1k({T:E.T,R:E.R});5(E.15==H.15){H.3.1A=Q}1c{H.3.1A=U}d(W,H);4 z=3r(6(){H.3.1o=U;d(w,H);y.3s();2e(H.15){17"R":y.2i({2c:1,R:(H.3.1A?"-=":"+=")+H.1n+"21"},H.1O,"2j",6(){H.3.1o=Q;H.3.1z=U;d(w,H);5(H.1j==U){5(a.1l.1E&&10(a.1l.2z)>8){y.2I(H.Y+"-2f")}}H.1T()});16;17"T":y.2i({2c:1,T:(H.3.1A?"-=":"+=")+H.1n+"21"},H.1O,"2j",6(){H.3.1o=Q;H.3.1z=U;d(w,H);5(H.1j==U){5(a.1l.1E&&10(a.1l.2z)>8){y.2I(H.Y+"-2f")}}H.1T()});16;17"1d":y.2i({2c:1,R:(H.3.1A?"+=":"-=")+H.1n+"21"},H.1O,"2j",6(){H.3.1o=Q;H.3.1z=U;d(w,H);5(H.1j==U){5(a.1l.1E&&10(a.1l.2z)>8){y.2I(H.Y+"-2f")}}H.1T()});16;17"1b":y.2i({2c:1,T:(H.3.1A?"+=":"-=")+H.1n+"21"},H.1O,"2j",6(){H.3.1o=Q;H.3.1z=U;d(w,H);5(H.1j==U){5(a.1l.1E&&10(a.1l.2z)>8){y.2I(H.Y+"-2f")}}H.1T()});16}},H.28)}});a(w).2h("22",6(B,x){4 A=n(W);5((7 x=="1K"&&x==U&&(i(A)&&i(A.3)&&a("#"+A.3.S).Z>0))||(7 x=="1u"&&(i(A)&&i(A.3)&&a("#"+A.3.S).Z>0&&!A.3.1M&&A.3.1t))){5(7 x=="1K"&&x==U){a(W).1f("2t")}A.3.1o=Q;A.3.1z=Q;d(W,A);4 y=a("#"+A.3.S);4 z=7 x=="1u"?A.29:0;4 C=3r(6(){A.3.1o=U;d(w,A);y.3s();5(A.1j==U){5(a.1l.1E&&10(a.1l.2z)>8){y.4e(A.Y+"-2f")}}2e(A.15){17"R":y.2i({2c:0,R:(A.3.1A?"+=":"-=")+A.1n+"21"},A.1P,"2j",6(){A.3.1t=Q;A.3.1o=Q;A.3.1z=U;d(w,A);y.1k("2H","2R");A.1U()});16;17"T":y.2i({2c:0,T:(A.3.1A?"+=":"-=")+A.1n+"21"},A.1P,"2j",6(){A.3.1t=Q;A.3.1o=Q;A.3.1z=U;d(w,A);y.1k("2H","2R");A.1U()});16;17"1d":y.2i({2c:0,R:(A.3.1A?"-=":"+=")+A.1n+"21"},A.1P,"2j",6(){A.3.1t=Q;A.3.1o=Q;A.3.1z=U;d(w,A);y.1k("2H","2R");A.1U()});16;17"1b":y.2i({2c:0,T:(A.3.1A?"-=":"+=")+A.1n+"21"},A.1P,"2j",6(){A.3.1t=Q;A.3.1o=Q;A.3.1z=U;d(w,A);y.1k("2H","2R");A.1U()});16}},z);A.3.1S=f();A.3.1M=Q;d(W,A);s(A)}})})}12 W}})(4f);',62,264,'|||privateVars|var|if|function|typeof|||||||||||||||||||||||||||||||||||||||||||||false|left|id|top|true|tail|this|null|baseClass|length|parseInt|align|return|middle|td|position|break|case|isArray|isEmptyObject|object|bottom|else|right|each|trigger|find|themeMargins|fn|dropShadow|css|browser|hideElementId|distance|is_animating|width|height|Math|window|is_open|undefined|class|divStyle|tableStyle|abs|is_animation_complete|is_position_changed|replace|hidden|difference|msie|gif|innerHtml|img|data|creation_datetime|boolean|BASE_CLASS|is_freezed|innerHtmlStyle|openingSpeed|closingSpeed|string|private_jquerybubblepopup_options|last_display_datetime|afterShown|afterHidden|last_modified_datetime|MIDDLE|is_mouse_over|themeName|toLowerCase|for|px|hidebubblepopup|last_options|center|selectable|mouseOver|mouseOut|openingDelay|closingDelay|themePath|number|opacity|unbind|switch|ie|scrollTop|bind|animate|swing|html|TOP|BOTTOM|alwaysVisible|manageMouseEvents|in|src|png|new|unfreezebubblepopup|showbubblepopup|tr|alt|outerWidth|outerHeight|version|positionbubblepopup|remove|show|total|substring|offset|empty|display|addClass|Date|1000|freezebubblepopup|me|LEFT|RIGHT|alignHorizontalValues|style|none|managebubblepopup|setbubblepopupinnerhtml|setbubblepopupoptions|options_key|DIV_STYLE|DIV_ID|table|TABLE_STYLE|LEFT_STYLE|RIGHT_STYLE|INNERHTML_STYLE|INNERHTML|alignValues|alignVerticalValues|hide|visibility|text|vertical|model_tr|model_td|model_markup|div|TEMPLATE_CLASS|tbody|MIDDLE_STYLE|positionValues|mouseOverValues|mouseOutValues|250|jquerybubblepopup|trim|charAt|visible|Array|0px|setTimeout|stop|IsBubblePopupOpen|GetBubblePopupLastDisplayDateTime|GetBubblePopupLastModifiedDateTime|GetBubblePopupCreationDateTime|GetBubblePopupMarkup|GetBubblePopupID|RemoveBubblePopup|HasBubblePopup|GetBubblePopupOptions|delete|SetBubblePopupInnerHtml|SetBubblePopupOptions|ShowBubblePopup|ShowAllBubblePopups|HideBubblePopup|HideAllBubblePopups|FreezeBubblePopup|FreezeAllBubblePopups|UnfreezeBubblePopup|UnfreezeAllBubblePopups|CreateBubblePopup|cache|20px|azure|themes|13px|10px|extend|toUpperCase|_STYLE|push|background|image|url|while|indexOf|round|getTime|resize|document|mousemove|pageX|pageY|appendTo|body|absolute|block|removeClass|jQuery'.split('|'),0,{}))
